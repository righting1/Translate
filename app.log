  Warning: Invalid config for models: <class 'list'>
2025-10-10 11:45:50 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 11:45:50 - app.main - INFO - 应用名称: Translate API
2025-10-10 11:45:50 - app.main - INFO - 调试模式: True
2025-10-10 11:45:50 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 11:45:50 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 11:45:50 - app.main - INFO - 全局异常处理器已注册
2025-10-10 11:45:50 - app.main - INFO - V1 API路由已注册
2025-10-10 11:45:50 - app.main - INFO - 翻译API路由已注册
2025-10-10 11:45:50 - app.main - INFO - 异步任务路由已注册
2025-10-10 11:45:50 - app.main - INFO - 流式API路由已注册
2025-10-10 11:45:50 - app.main - INFO - FastAPI应用初始化完成
Warning: Invalid config for models: <class 'list'>
2025-10-10 11:45:53 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 11:45:53 - app.main - INFO - 应用名称: Translate API
2025-10-10 11:45:53 - app.main - INFO - 调试模式: True
2025-10-10 11:45:53 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 11:45:53 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 11:45:53 - app.main - INFO - 全局异常处理器已注册
2025-10-10 11:45:53 - app.main - INFO - V1 API路由已注册
2025-10-10 11:45:53 - app.main - INFO - 翻译API路由已注册
2025-10-10 11:45:53 - app.main - INFO - 异步任务路由已注册
2025-10-10 11:45:53 - app.main - INFO - 流式API路由已注册
2025-10-10 11:45:53 - app.main - INFO - FastAPI应用初始化完成
  Warning: Invalid config for models: <class 'list'>
2025-10-10 12:10:49 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 12:10:49 - app.main - INFO - 应用名称: Translate API
2025-10-10 12:10:49 - app.main - INFO - 调试模式: True
2025-10-10 12:10:49 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 12:10:49 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 12:10:49 - app.main - INFO - 全局异常处理器已注册
2025-10-10 12:10:49 - app.main - INFO - V1 API路由已注册
2025-10-10 12:10:49 - app.main - INFO - 翻译API路由已注册
2025-10-10 12:10:49 - app.main - INFO - 异步任务路由已注册
2025-10-10 12:10:49 - app.main - INFO - 流式API路由已注册
2025-10-10 12:10:49 - app.main - INFO - FastAPI应用初始化完成
INFO:     127.0.0.1:50738 - "GET /api/translate/features HTTP/1.1" 200 OK
INFO:     127.0.0.1:50723 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:50627 - "GET /api/translate/features HTTP/1.1" 200 OK
INFO:     127.0.0.1:55794 - "POST /api/translate/keyword-summary?summary_length=80 HTTP/1.1" 200 OK
2025-10-10 12:10:49 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:10:49 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
2025-10-10 12:10:49 - app.api.translate.routes - INFO - 
2025-10-10 12:10:49 - app.services.translate - ERROR - Unexpected error in en2zh translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 82, in en2zh
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:10:49 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
 Warning: Invalid config for models: <class 'list'>
2025-10-10 12:11:34 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 12:11:34 - app.main - INFO - 应用名称: Translate API
2025-10-10 12:11:34 - app.main - INFO - 调试模式: True
2025-10-10 12:11:34 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 12:11:34 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 12:11:34 - app.main - INFO - 全局异常处理器已注册
2025-10-10 12:11:34 - app.main - INFO - V1 API路由已注册
2025-10-10 12:11:34 - app.main - INFO - 翻译API路由已注册
2025-10-10 12:11:34 - app.main - INFO - 异步任务路由已注册
2025-10-10 12:11:34 - app.main - INFO - 流式API路由已注册
2025-10-10 12:11:34 - app.main - INFO - FastAPI应用初始化完成
 Warning: Invalid config for models: <class 'list'>
2025-10-10 12:15:25 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 12:15:25 - app.main - INFO - 应用名称: Translate API
2025-10-10 12:15:25 - app.main - INFO - 调试模式: True
2025-10-10 12:15:25 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 12:15:25 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 12:15:25 - app.main - INFO - 全局异常处理器已注册
2025-10-10 12:15:25 - app.main - INFO - V1 API路由已注册
2025-10-10 12:15:25 - app.main - INFO - 翻译API路由已注册
2025-10-10 12:15:25 - app.main - INFO - 异步任务路由已注册
2025-10-10 12:15:25 - app.main - INFO - 流式API路由已注册
2025-10-10 12:15:25 - app.main - INFO - FastAPI应用初始化完成
 Warning: Invalid config for models: <class 'list'>
2025-10-10 12:23:17 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 12:23:17 - app.main - INFO - 应用名称: Translate API
2025-10-10 12:23:17 - app.main - INFO - 调试模式: True
2025-10-10 12:23:17 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 12:23:17 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 12:23:17 - app.main - INFO - 全局异常处理器已注册
2025-10-10 12:23:17 - app.main - INFO - V1 API路由已注册
2025-10-10 12:23:17 - app.main - INFO - 翻译API路由已注册
2025-10-10 12:23:17 - app.main - INFO - 异步任务路由已注册
2025-10-10 12:23:17 - app.main - INFO - 流式API路由已注册
2025-10-10 12:23:17 - app.main - INFO - FastAPI应用初始化完成
INFO:     127.0.0.1:65252 - "GET /api/v1/health HTTP/1.1" 200 OK
2025-10-10 12:23:22 - app.api.translate.routes - INFO - 收到翻译请求: task=zh2en, text_length=6, model=
2025-10-10 12:23:22 - app.services.ai_model - INFO - OpenAI chat_completion: model=gpt-3.5-turbo, messages_count=1
2025-10-10 12:23:24 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 401 Unauthorized"
2025-10-10 12:23:24 - app.utils.error_handlers - ERROR - API Exception: Invalid OpenAI API key
INFO:     127.0.0.1:65256 - "POST /api/translate/run HTTP/1.1" 401 Unauthorized
 INFO:     127.0.0.1:61946 - "GET /api/translate/models HTTP/1.1" 200 OK
Warning: Invalid config for models: <class 'list'>
2025-10-10 12:30:02 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 12:30:02 - app.main - INFO - 应用名称: Translate API
2025-10-10 12:30:02 - app.main - INFO - 调试模式: True
2025-10-10 12:30:02 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 12:30:02 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 12:30:02 - app.main - INFO - 全局异常处理器已注册
2025-10-10 12:30:02 - app.main - INFO - V1 API路由已注册
2025-10-10 12:30:02 - app.main - INFO - 翻译API路由已注册
2025-10-10 12:30:02 - app.main - INFO - 异步任务路由已注册
2025-10-10 12:30:02 - app.main - INFO - 流式API路由已注册
2025-10-10 12:30:02 - app.main - INFO - FastAPI应用初始化完成
 Warning: Invalid config for models: <class 'list'>
2025-10-10 12:44:21 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 12:44:21 - app.main - INFO - 应用名称: Translate API
2025-10-10 12:44:21 - app.main - INFO - 调试模式: True
2025-10-10 12:44:21 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 12:44:21 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 12:44:21 - app.main - INFO - 全局异常处理器已注册
2025-10-10 12:44:21 - app.main - INFO - V1 API路由已注册
2025-10-10 12:44:21 - app.main - INFO - 翻译API路由已注册
2025-10-10 12:44:21 - app.main - INFO - 异步任务路由已注册
2025-10-10 12:44:21 - app.main - INFO - 流式API路由已注册
2025-10-10 12:44:21 - app.main - INFO - FastAPI应用初始化完成
加载到的模型配置： [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]
尝试注册模型: openai 类型: openai
Failed to initialize openai service: 'Settings' object has no attribute 'openai_api_key'
尝试注册模型: dashscope 类型: dashscope
Failed to initialize dashscope service: 'Settings' object has no attribute 'dashscope_api_key'
尝试注册模型: zhipuai 类型: zhipuai
Failed to initialize zhipuai service: 'Settings' object has no attribute 'zhipuai_api_key'
最终可用模型： []
INFO:     127.0.0.1:61505 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:53704 - "GET /api/translate/features HTTP/1.1" 200 OK
2025-10-10 12:53:28 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:53:28 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:53707 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
2025-10-10 12:57:18 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:57:18 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:49701 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
INFO:     127.0.0.1:49209 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:49209 - "GET /api/translate/models HTTP/1.1" 200 OK
2025-10-10 12:57:42 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:57:42 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:49274 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
INFO:     127.0.0.1:62587 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:62587 - "GET /api/translate/models HTTP/1.1" 200 OK
2025-10-10 12:58:50 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:58:50 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:62590 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
  2025-10-10 13:02:24 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:02:24 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:02:24 - app.main - INFO - 调试模式: True
2025-10-10 13:02:24 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:02:24 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:02:24 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:02:24 - app.main - INFO - V1 API路由已注册
2025-10-10 13:02:24 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:02:24 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:02:24 - app.main - INFO - 流式API路由已注册
2025-10-10 13:02:24 - app.main - INFO - FastAPI应用初始化完成
加载到的模型配置： []
最终可用模型： []
2025-10-10 13:06:57 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:06:57 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:50119 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
INFO:     127.0.0.1:50127 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:57666 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:57666 - "GET /api/translate/models HTTP/1.1" 200 OK
2025-10-10 13:09:55 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:09:55 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:57686 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
 Using config path: D:\pythonProjects\Translate-my\config.yaml
2025-10-10 13:12:20 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:12:20 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:12:20 - app.main - INFO - 调试模式: True
2025-10-10 13:12:20 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:12:20 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:12:20 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:12:20 - app.main - INFO - V1 API路由已注册
2025-10-10 13:12:20 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:12:20 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:12:20 - app.main - INFO - 流式API路由已注册
2025-10-10 13:12:20 - app.main - INFO - FastAPI应用初始化完成
加载到的模型配置： []
最终可用模型： []
2025-10-10 13:12:54 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:12:54 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:57075 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
2025-10-10 13:13:05 - app.services.translate - ERROR - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:13:05 - app.utils.error_handlers - ERROR - API Exception: Translation failed: No AI services initialized
INFO:     127.0.0.1:60959 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
  Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:17:21 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:17:21 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:17:21 - app.main - INFO - 调试模式: True
2025-10-10 13:17:21 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:17:21 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:17:21 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:17:21 - app.main - INFO - V1 API路由已注册
2025-10-10 13:17:21 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:17:21 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:17:21 - app.main - INFO - 流式API路由已注册
2025-10-10 13:17:21 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:17:25 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:17:25 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:17:25 - app.main - INFO - 调试模式: True
2025-10-10 13:17:25 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:17:25 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:17:25 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:17:25 - app.main - INFO - V1 API路由已注册
2025-10-10 13:17:25 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:17:25 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:17:25 - app.main - INFO - 流式API路由已注册
2025-10-10 13:17:25 - app.main - INFO - FastAPI应用初始化完成
  Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:20:10 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:20:10 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:20:10 - app.main - INFO - 调试模式: True
2025-10-10 13:20:10 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:20:10 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:20:10 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:20:10 - app.main - INFO - V1 API路由已注册
2025-10-10 13:20:10 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:20:10 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:20:10 - app.main - INFO - 流式API路由已注册
2025-10-10 13:20:10 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:20:14 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:20:14 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:20:14 - app.main - INFO - 调试模式: True
2025-10-10 13:20:14 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:20:14 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:20:14 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:20:14 - app.main - INFO - V1 API路由已注册
2025-10-10 13:20:14 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:20:14 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:20:14 - app.main - INFO - 流式API路由已注册
2025-10-10 13:20:14 - app.main - INFO - FastAPI应用初始化完成
  Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:30:14 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:30:14 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:30:14 - app.main - INFO - 调试模式: True
2025-10-10 13:30:14 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:30:14 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:30:14 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:30:14 - app.main - INFO - V1 API路由已注册
2025-10-10 13:30:14 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:30:14 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:30:14 - app.main - INFO - 流式API路由已注册
2025-10-10 13:30:14 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:30:18 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:30:18 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:30:18 - app.main - INFO - 调试模式: True
2025-10-10 13:30:18 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:30:18 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:30:18 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:30:18 - app.main - INFO - V1 API路由已注册
2025-10-10 13:30:18 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:30:18 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:30:18 - app.main - INFO - 流式API路由已注册
2025-10-10 13:30:18 - app.main - INFO - FastAPI应用初始化完成
  Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:35:19 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:35:19 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:35:19 - app.main - INFO - 调试模式: True
2025-10-10 13:35:19 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:35:19 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:35:19 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:35:19 - app.main - INFO - V1 API路由已注册
2025-10-10 13:35:19 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:35:19 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:35:19 - app.main - INFO - 流式API路由已注册
2025-10-10 13:35:19 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:35:23 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:35:23 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:35:23 - app.main - INFO - 调试模式: True
2025-10-10 13:35:23 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:35:23 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:35:23 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:35:23 - app.main - INFO - V1 API路由已注册
2025-10-10 13:35:23 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:35:23 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:35:23 - app.main - INFO - 流式API路由已注册
2025-10-10 13:35:23 - app.main - INFO - FastAPI应用初始化完成
  Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
加载配置文件失败: 'Settings' object does not support item assignment
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
加载配置文件失败: 'Settings' object does not support item assignment
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:43:07 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:43:07 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:43:07 - app.main - INFO - 调试模式: True
2025-10-10 13:43:07 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:43:07 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:43:07 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:43:07 - app.main - INFO - V1 API路由已注册
2025-10-10 13:43:07 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:43:07 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:43:07 - app.main - INFO - 流式API路由已注册
2025-10-10 13:43:07 - app.main - INFO - FastAPI应用初始化完成
 2025-10-10 13:46:31 - app.services.ai_model - INFO - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 13:46:31 - app.services.ai_model - INFO - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 13:46:31 - app.services.ai_model - INFO - 模型 dashscope 注册成功
2025-10-10 13:46:31 - app.services.ai_model - INFO - 扁平配置注册完成：['dashscope']
2025-10-10 13:46:31 - app.services.ai_model - INFO - 最终可用模型：['dashscope']
INFO:     127.0.0.1:60764 - "GET /api/translate/models HTTP/1.1" 200 OK
2025-10-10 13:46:39 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
INFO:     127.0.0.1:60775 - "POST /api/translate/zh2en HTTP/1.1" 200 OK
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 13:46:46 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 13:46:46 - app.main - INFO - 应用名称: Translate API
2025-10-10 13:46:46 - app.main - INFO - 调试模式: True
2025-10-10 13:46:46 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 13:46:46 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 13:46:46 - app.main - INFO - 全局异常处理器已注册
2025-10-10 13:46:46 - app.main - INFO - V1 API路由已注册
2025-10-10 13:46:46 - app.main - INFO - 翻译API路由已注册
2025-10-10 13:46:46 - app.main - INFO - 异步任务路由已注册
2025-10-10 13:46:46 - app.main - INFO - 流式API路由已注册
2025-10-10 13:46:46 - app.main - INFO - FastAPI应用初始化完成
2025-10-10 13:48:45 - app.services.ai_model - INFO - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 13:48:45 - app.services.ai_model - INFO - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 13:48:45 - app.services.ai_model - INFO - 模型 dashscope 注册成功
2025-10-10 13:48:45 - app.services.ai_model - INFO - 扁平配置注册完成：['dashscope']
2025-10-10 13:48:45 - app.services.ai_model - INFO - 最终可用模型：['dashscope']
INFO:     127.0.0.1:63770 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:63770 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:63770 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:51283 - "GET /api/translate/models HTTP/1.1" 200 OK
INFO:     127.0.0.1:49685 - "GET /api/translate/models HTTP/1.1" 200 OK
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:09:42 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:09:42 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:09:42 - app.main - INFO - 调试模式: True
2025-10-10 14:09:42 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:09:42 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:09:42 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:09:42 - app.main - INFO - V1 API路由已注册
2025-10-10 14:09:42 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:09:42 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:09:42 - app.main - INFO - 流式API路由已注册
2025-10-10 14:09:42 - app.main - INFO - FastAPI应用初始化完成
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:12:40 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:12:40 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:12:40 - app.main - INFO - 调试模式: True
2025-10-10 14:12:40 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:12:40 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:12:40 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:12:40 - app.main - INFO - V1 API路由已注册
2025-10-10 14:12:40 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:12:40 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:12:40 - app.main - INFO - 流式API路由已注册
2025-10-10 14:12:40 - app.main - INFO - FastAPI应用初始化完成
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:13:54 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:13:54 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:13:54 - app.main - INFO - 调试模式: True
2025-10-10 14:13:54 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:13:54 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:13:54 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:13:54 - app.main - INFO - V1 API路由已注册
2025-10-10 14:13:54 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:13:54 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:13:54 - app.main - INFO - 流式API路由已注册
2025-10-10 14:13:54 - app.main - INFO - FastAPI应用初始化完成
 Using first existing config (no models found): D:\pythonProjects\Translate-my\config.yaml
Using config path: D:\pythonProjects\Translate-my\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:15:59 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:15:59 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:15:59 - app.main - INFO - 调试模式: True
2025-10-10 14:15:59 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:15:59 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:15:59 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:15:59 - app.main - INFO - V1 API路由已注册
2025-10-10 14:15:59 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:15:59 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:15:59 - app.main - INFO - 流式API路由已注册
2025-10-10 14:15:59 - app.main - INFO - FastAPI应用初始化完成
2025-10-10 14:17:49 - app.services.ai_model - INFO - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 14:17:49 - app.services.ai_model - INFO - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 14:17:49 - app.services.ai_model - INFO - 模型 dashscope 注册成功
2025-10-10 14:17:49 - app.services.ai_model - INFO - 扁平配置注册完成：['dashscope']
2025-10-10 14:17:49 - app.services.ai_model - INFO - 最终可用模型：['dashscope']
2025-10-10 14:17:50 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
INFO:     127.0.0.1:55067 - "POST /api/translate/zh2en HTTP/1.1" 200 OK
 INFO:     127.0.0.1:62790 - "GET /api/translate/models HTTP/1.1" 200 OK
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:25:58 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:25:58 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:25:58 - app.main - INFO - 调试模式: True
2025-10-10 14:25:58 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:25:58 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:25:58 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:25:58 - app.main - INFO - V1 API路由已注册
2025-10-10 14:25:58 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:25:58 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:25:58 - app.main - INFO - 流式API路由已注册
2025-10-10 14:25:58 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:26:01 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:26:01 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:26:01 - app.main - INFO - 调试模式: True
2025-10-10 14:26:01 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:26:01 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:26:01 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:26:01 - app.main - INFO - V1 API路由已注册
2025-10-10 14:26:01 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:26:01 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:26:01 - app.main - INFO - 流式API路由已注册
2025-10-10 14:26:01 - app.main - INFO - FastAPI应用初始化完成
2025-10-10 14:26:14 - app.services.ai_model - INFO - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 14:26:14 - app.services.ai_model - INFO - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 14:26:14 - app.services.ai_model - INFO - 模型 dashscope 注册成功
2025-10-10 14:26:14 - app.services.ai_model - INFO - 扁平配置注册完成：['dashscope']
2025-10-10 14:26:14 - app.services.ai_model - INFO - 最终可用模型：['dashscope']
INFO:     127.0.0.1:62912 - "GET /api/translate/models HTTP/1.1" 200 OK
2025-10-10 14:26:18 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 401 Unauthorized"
2025-10-10 14:26:18 - app.services.translate - ERROR - Unexpected error in zh2en translation: Client error '401 Unauthorized' for url 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 453, in text_completion
    return await service.text_completion(prompt, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 331, in text_completion
    return await self.chat_completion(messages, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 300, in chat_completion
    response.raise_for_status()
  File "D:\python\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-10-10 14:26:18 - app.utils.error_handlers - ERROR - API Exception: Translation failed: Client error '401 Unauthorized' for url 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
INFO:     127.0.0.1:62917 - "POST /api/translate/zh2en HTTP/1.1" 502 Bad Gateway
  Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:31:02 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:31:02 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:31:02 - app.main - INFO - 调试模式: True
2025-10-10 14:31:02 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:31:02 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:31:02 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:31:02 - app.main - INFO - V1 API路由已注册
2025-10-10 14:31:02 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:31:02 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:31:02 - app.main - INFO - 流式API路由已注册
2025-10-10 14:31:02 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 14:31:06 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 14:31:06 - app.main - INFO - 应用名称: Translate API
2025-10-10 14:31:06 - app.main - INFO - 调试模式: True
2025-10-10 14:31:06 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 14:31:06 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 14:31:06 - app.main - INFO - 全局异常处理器已注册
2025-10-10 14:31:06 - app.main - INFO - V1 API路由已注册
2025-10-10 14:31:06 - app.main - INFO - 翻译API路由已注册
2025-10-10 14:31:06 - app.main - INFO - 异步任务路由已注册
2025-10-10 14:31:06 - app.main - INFO - 流式API路由已注册
2025-10-10 14:31:06 - app.main - INFO - FastAPI应用初始化完成
 2025-10-10 14:55:20 - app.services.ai_model - INFO - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 14:55:20 - app.services.ai_model - INFO - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 14:55:20 - app.services.ai_model - INFO - 模型 dashscope 注册成功
2025-10-10 14:55:20 - app.services.ai_model - INFO - 扁平配置注册完成：['dashscope']
2025-10-10 14:55:20 - app.services.ai_model - INFO - 最终可用模型：['dashscope']
INFO:     127.0.0.1:50460 - "GET /api/translate/models HTTP/1.1" 200 OK
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 15:12:33 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 15:12:33 - app.main - INFO - 应用名称: Translate API
2025-10-10 15:12:33 - app.main - INFO - 调试模式: True
2025-10-10 15:12:33 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 15:12:33 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 15:12:33 - app.main - INFO - 全局异常处理器已注册
2025-10-10 15:12:33 - app.main - INFO - V1 API路由已注册
2025-10-10 15:12:33 - app.main - INFO - 翻译API路由已注册
2025-10-10 15:12:33 - app.main - INFO - 异步任务路由已注册
2025-10-10 15:12:33 - app.main - INFO - 流式API路由已注册
2025-10-10 15:12:33 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 15:12:36 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 15:12:36 - app.main - INFO - 应用名称: Translate API
2025-10-10 15:12:36 - app.main - INFO - 调试模式: True
2025-10-10 15:12:36 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 15:12:36 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 15:12:36 - app.main - INFO - 全局异常处理器已注册
2025-10-10 15:12:36 - app.main - INFO - V1 API路由已注册
2025-10-10 15:12:36 - app.main - INFO - 翻译API路由已注册
2025-10-10 15:12:36 - app.main - INFO - 异步任务路由已注册
2025-10-10 15:12:36 - app.main - INFO - 流式API路由已注册
2025-10-10 15:12:36 - app.main - INFO - FastAPI应用初始化完成
  Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
  Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
  Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 15:31:09 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 15:31:09 - app.main - INFO - 应用名称: Translate API
2025-10-10 15:31:09 - app.main - INFO - 调试模式: True
2025-10-10 15:31:09 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 15:31:09 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 15:31:09 - app.main - INFO - 全局异常处理器已注册
2025-10-10 15:31:09 - app.main - INFO - V1 API路由已注册
2025-10-10 15:31:09 - app.main - INFO - 翻译API路由已注册
2025-10-10 15:31:09 - app.main - INFO - 异步任务路由已注册
2025-10-10 15:31:09 - app.main - INFO - 流式API路由已注册
2025-10-10 15:31:09 - app.main - INFO - FastAPI应用初始化完成
INFO:     127.0.0.1:53929 - "GET /api/translate/async/callbacks/available HTTP/1.1" 200 OK
2025-10-10 15:32:14 - app.services.failure_callbacks - ERROR - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
INFO:     127.0.0.1:53934 - "POST /api/translate/async/callbacks/test?callback_name=log_failure HTTP/1.1" 200 OK
2025-10-10 15:32:16 - app.utils.error_handlers - WARNING - Validation error: 1 errors
INFO:     127.0.0.1:53938 - "POST /api/translate/async/zh2en HTTP/1.1" 422 Unprocessable Entity
2025-10-10 15:32:18 - app.api.async_tasks.routes - INFO - 提交异步中译英任务: text_length=6, model=openai
2025-10-10 15:32:18 - app.services.async_task_manager - INFO - Created task 1db13144-89ea-4ade-a006-758344b49646 of type TaskType.ZH2EN
2025-10-10 15:32:18 - app.api.async_tasks.routes - INFO - 异步中译英任务已提交: task_id=1db13144-89ea-4ade-a006-758344b49646
INFO:     127.0.0.1:53952 - "POST /api/translate/async/zh2en HTTP/1.1" 200 OK
2025-10-10 15:32:18 - app.services.async_task_manager - INFO - Starting execution of task 1db13144-89ea-4ade-a006-758344b49646
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Creating service for model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Creating service with type: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 15:32:18 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 15:32:18 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:32:18 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 15:32:18 - app.services.langchain_service - WARNING - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - Initializing LangChainTranslationService with model: openai, use_chains: True
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - Initializing LangChain chains...
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - All chains initialized successfully
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - Starting zh2en translation: 6 characters
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - zh2en translation completed successfully
2025-10-10 15:32:18 - app.services.async_task_manager - INFO - Task 1db13144-89ea-4ade-a006-758344b49646 completed successfully
INFO:     127.0.0.1:53958 - "GET /api/translate/async/status/1db13144-89ea-4ade-a006-758344b49646 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54150 - "GET /api/translate/async/callbacks/available HTTP/1.1" 200 OK
2025-10-10 15:34:52 - app.services.failure_callbacks - ERROR - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
INFO:     127.0.0.1:54152 - "POST /api/translate/async/callbacks/test?callback_name=log_failure HTTP/1.1" 200 OK
2025-10-10 15:34:54 - app.utils.error_handlers - WARNING - Validation error: 1 errors
INFO:     127.0.0.1:54156 - "POST /api/translate/async/zh2en HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:54323 - "GET /api/translate/async/callbacks/available HTTP/1.1" 200 OK
2025-10-10 15:36:56 - app.services.failure_callbacks - ERROR - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
INFO:     127.0.0.1:54327 - "POST /api/translate/async/callbacks/test?callback_name=log_failure HTTP/1.1" 200 OK
2025-10-10 15:36:58 - app.utils.error_handlers - WARNING - Validation error: 1 errors
INFO:     127.0.0.1:54330 - "POST /api/translate/async/zh2en HTTP/1.1" 422 Unprocessable Entity
2025-10-10 15:37:00 - app.api.async_tasks.routes - INFO - 提交异步中译英任务: text_length=6, model=openai
2025-10-10 15:37:00 - app.services.async_task_manager - INFO - Created task 67a43040-0365-403a-b562-dcc96dcf35a6 of type TaskType.ZH2EN
2025-10-10 15:37:00 - app.api.async_tasks.routes - INFO - 异步中译英任务已提交: task_id=67a43040-0365-403a-b562-dcc96dcf35a6
INFO:     127.0.0.1:54336 - "POST /api/translate/async/zh2en HTTP/1.1" 200 OK
2025-10-10 15:37:00 - app.services.async_task_manager - INFO - Starting execution of task 67a43040-0365-403a-b562-dcc96dcf35a6
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Creating service for model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Creating service with type: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 15:37:00 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 15:37:00 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:37:00 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 15:37:00 - app.services.langchain_service - WARNING - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - Initializing LangChainTranslationService with model: openai, use_chains: True
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - Initializing LangChain chains...
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - All chains initialized successfully
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - Starting zh2en translation: 6 characters
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - zh2en translation completed successfully
2025-10-10 15:37:00 - app.services.async_task_manager - INFO - Task 67a43040-0365-403a-b562-dcc96dcf35a6 completed successfully
INFO:     127.0.0.1:54342 - "GET /api/translate/async/status/67a43040-0365-403a-b562-dcc96dcf35a6 HTTP/1.1" 200 OK
 INFO:     127.0.0.1:54531 - "GET /api/translate/async/callbacks/available HTTP/1.1" 200 OK
2025-10-10 15:39:22 - app.services.failure_callbacks - ERROR - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
INFO:     127.0.0.1:54535 - "POST /api/translate/async/callbacks/test?callback_name=log_failure HTTP/1.1" 200 OK
2025-10-10 15:39:24 - app.api.async_tasks.routes - INFO - 提交异步中译英任务: text_length=3, model=openaixx
2025-10-10 15:39:24 - app.services.async_task_manager - INFO - Created task 23907512-5851-44b7-8fe0-d486499c52e1 of type TaskType.ZH2EN
2025-10-10 15:39:24 - app.api.async_tasks.routes - INFO - 异步中译英任务已提交: task_id=23907512-5851-44b7-8fe0-d486499c52e1
INFO:     127.0.0.1:54539 - "POST /api/translate/async/zh2en HTTP/1.1" 200 OK
2025-10-10 15:39:24 - app.services.async_task_manager - INFO - Starting execution of task 23907512-5851-44b7-8fe0-d486499c52e1
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Creating service for model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Creating service with type: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 15:39:24 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 15:39:24 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:39:24 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 15:39:24 - app.services.langchain_service - WARNING - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - Initializing LangChainTranslationService with model: openaixx, use_chains: True
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - Initializing LangChain chains...
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - All chains initialized successfully
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - Starting zh2en translation: 3 characters
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - zh2en translation completed successfully
2025-10-10 15:39:24 - app.services.async_task_manager - INFO - Task 23907512-5851-44b7-8fe0-d486499c52e1 completed successfully
INFO:     127.0.0.1:54553 - "GET /api/translate/async/status/23907512-5851-44b7-8fe0-d486499c52e1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54676 - "GET /api/translate/async/23907512-5851-44b7-8fe0-d486499c52e1 HTTP/1.1" 200 OK
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 15:41:07 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 15:41:07 - app.main - INFO - 应用名称: Translate API
2025-10-10 15:41:07 - app.main - INFO - 调试模式: True
2025-10-10 15:41:07 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 15:41:07 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 15:41:07 - app.main - INFO - 全局异常处理器已注册
2025-10-10 15:41:07 - app.main - INFO - V1 API路由已注册
2025-10-10 15:41:07 - app.main - INFO - 翻译API路由已注册
2025-10-10 15:41:07 - app.main - INFO - 异步任务路由已注册
2025-10-10 15:41:07 - app.main - INFO - 流式API路由已注册
2025-10-10 15:41:07 - app.main - INFO - FastAPI应用初始化完成
  Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 15:46:07 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 15:46:07 - app.main - INFO - 应用名称: Translate API
2025-10-10 15:46:07 - app.main - INFO - 调试模式: True
2025-10-10 15:46:07 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 15:46:07 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 15:46:07 - app.main - INFO - 全局异常处理器已注册
2025-10-10 15:46:07 - app.main - INFO - V1 API路由已注册
2025-10-10 15:46:07 - app.main - INFO - 翻译API路由已注册
2025-10-10 15:46:07 - app.main - INFO - 异步任务路由已注册
2025-10-10 15:46:07 - app.main - INFO - 流式API路由已注册
2025-10-10 15:46:07 - app.main - INFO - FastAPI应用初始化完成
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 15:46:09 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 15:46:09 - app.main - INFO - 应用名称: Translate API
2025-10-10 15:46:09 - app.main - INFO - 调试模式: True
2025-10-10 15:46:09 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 15:46:09 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 15:46:09 - app.main - INFO - 全局异常处理器已注册
2025-10-10 15:46:09 - app.main - INFO - V1 API路由已注册
2025-10-10 15:46:09 - app.main - INFO - 翻译API路由已注册
2025-10-10 15:46:09 - app.main - INFO - 异步任务路由已注册
2025-10-10 15:46:09 - app.main - INFO - 流式API路由已注册
2025-10-10 15:46:09 - app.main - INFO - FastAPI应用初始化完成
      Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 15:54:19 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 15:54:19 - app.main - INFO - 应用名称: Translate API
2025-10-10 15:54:19 - app.main - INFO - 调试模式: True
2025-10-10 15:54:19 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 15:54:19 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 15:54:19 - app.main - INFO - 全局异常处理器已注册
2025-10-10 15:54:19 - app.main - INFO - V1 API路由已注册
2025-10-10 15:54:19 - app.main - INFO - 翻译API路由已注册
2025-10-10 15:54:19 - app.main - INFO - 异步任务路由已注册
2025-10-10 15:54:19 - app.main - INFO - 流式API路由已注册
2025-10-10 15:54:19 - app.main - INFO - FastAPI应用初始化完成
INFO:     127.0.0.1:56239 - "GET /api/translate/async/callbacks/available HTTP/1.1" 200 OK
2025-10-10 15:55:57 - app.services.failure_callbacks - ERROR - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
INFO:     127.0.0.1:56249 - "POST /api/translate/async/callbacks/test?callback_name=log_failure HTTP/1.1" 200 OK
2025-10-10 15:55:59 - app.api.async_tasks.routes - INFO - 提交异步中译英任务: text_length=3, model=openaixx
2025-10-10 15:55:59 - app.services.async_task_manager - INFO - Created task 470a535c-aa3f-41c1-bea3-21fc66420e54 of type TaskType.ZH2EN
2025-10-10 15:55:59 - app.api.async_tasks.routes - INFO - 异步中译英任务已提交: task_id=470a535c-aa3f-41c1-bea3-21fc66420e54
INFO:     127.0.0.1:56253 - "POST /api/translate/async/zh2en HTTP/1.1" 200 OK
2025-10-10 15:55:59 - app.services.async_task_manager - INFO - Starting execution of task 470a535c-aa3f-41c1-bea3-21fc66420e54
2025-10-10 15:55:59 - app.services.langchain_service - INFO - Creating service for model: dashscope
2025-10-10 15:55:59 - app.services.langchain_service - INFO - Creating service with type: dashscope
2025-10-10 15:55:59 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:55:59 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 15:55:59 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 15:55:59 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:55:59 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 15:55:59 - app.services.langchain_service - WARNING - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:55:59 - app.services.langchain_translate - INFO - Initializing LangChainTranslationService with model: openaixx, use_chains: True
2025-10-10 15:55:59 - app.services.langchain_translate - INFO - Initializing LangChain chains...
2025-10-10 15:55:59 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:55:59 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:56:00 - app.services.langchain_translate - INFO - All chains initialized successfully
2025-10-10 15:56:00 - app.services.langchain_translate - INFO - Starting zh2en translation: 3 characters
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - Found service: False
2025-10-10 15:56:00 - app.services.langchain_translate - ERROR - zh2en translation failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 15:56:00 - app.services.async_task_manager - ERROR - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 failed (attempt 1): Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 15:56:00 - app.services.failure_callbacks - ERROR - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 15:56:00 - app.services.failure_callbacks - INFO - Saved failure details to logs\failures\task_failure_470a535c-aa3f-41c1-bea3-21fc66420e54_20251010_155600.json
2025-10-10 15:56:00 - app.services.failure_callbacks - INFO - Sent failure notification for task 470a535c-aa3f-41c1-bea3-21fc66420e54
2025-10-10 15:56:00 - app.services.failure_callbacks - ERROR - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 15:56:00 - app.services.callback_registry - INFO - Would send email notification to test@example.com: 
            异步任务失败通知
            
            任务ID: 470a535c-aa3f-41c1-bea3-21fc66420e54
          ...
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - Executed task-specific failure callback for task 470a535c-aa3f-41c1-bea3-21fc66420e54
2025-10-10 15:56:00 - app.services.failure_callbacks - ERROR - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - Executed global failure callback: log_failure_callback
2025-10-10 15:56:00 - app.services.failure_callbacks - INFO - Saved failure details to logs\failures\task_failure_470a535c-aa3f-41c1-bea3-21fc66420e54_20251010_155600.json
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - Executed global failure callback: save_failure_to_file_callback
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - Executed global failure callback: cleanup_failed_task_data_callback
2025-10-10 15:56:00 - app.services.async_task_manager - ERROR - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 failed permanently after 0 retries: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
INFO:     127.0.0.1:56259 - "GET /api/translate/async/status/470a535c-aa3f-41c1-bea3-21fc66420e54 HTTP/1.1" 200 OK
2025-10-10 16:00:58 - app.api.async_tasks.routes - INFO - 提交异步中译英任务: text_length=6, model=openai
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - Created task 5215212a-1719-41ac-9b94-196dbbe8977c of type TaskType.ZH2EN
2025-10-10 16:00:58 - app.api.async_tasks.routes - INFO - 异步中译英任务已提交: task_id=5215212a-1719-41ac-9b94-196dbbe8977c
INFO:     127.0.0.1:56763 - "POST /api/translate/async/zh2en HTTP/1.1" 200 OK
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - Starting execution of task 5215212a-1719-41ac-9b94-196dbbe8977c
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Creating service for model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Creating service with type: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 16:00:58 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 16:00:58 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:00:58 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 16:00:58 - app.services.langchain_service - WARNING - ⚠ Service created for dashscope but LLM is None
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - Initializing LangChainTranslationService with model: openai, use_chains: True
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - Initializing LangChain chains...
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - All chains initialized successfully
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - Starting zh2en translation: 6 characters
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:00:58 - app.services.langchain_translate - ERROR - zh2en translation failed: Model 'No service available for text generation. Requested service: openai' is not available or not configured
2025-10-10 16:00:58 - app.services.async_task_manager - ERROR - Task 5215212a-1719-41ac-9b94-196dbbe8977c failed (attempt 1): Model 'No service available for text generation. Requested service: openai' is not available or not configured
2025-10-10 16:00:58 - app.services.failure_callbacks - ERROR - Task 5215212a-1719-41ac-9b94-196dbbe8977c (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openai' is not available or not configured (Retry 0/1)
2025-10-10 16:00:58 - app.services.failure_callbacks - INFO - Saved failure details to logs\failures\task_failure_5215212a-1719-41ac-9b94-196dbbe8977c_20251010_160058.json
2025-10-10 16:00:58 - app.services.failure_callbacks - INFO - Sent failure notification for task 5215212a-1719-41ac-9b94-196dbbe8977c
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - Executed task-specific failure callback for task 5215212a-1719-41ac-9b94-196dbbe8977c
2025-10-10 16:00:58 - app.services.failure_callbacks - ERROR - Task 5215212a-1719-41ac-9b94-196dbbe8977c (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openai' is not available or not configured (Retry 0/1)
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - Executed global failure callback: log_failure_callback
2025-10-10 16:00:58 - app.services.failure_callbacks - INFO - Saved failure details to logs\failures\task_failure_5215212a-1719-41ac-9b94-196dbbe8977c_20251010_160058.json
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - Executed global failure callback: save_failure_to_file_callback
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - Executed global failure callback: cleanup_failed_task_data_callback
2025-10-10 16:00:58 - app.services.async_task_manager - ERROR - Task 5215212a-1719-41ac-9b94-196dbbe8977c failed permanently after 0 retries: Model 'No service available for text generation. Requested service: openai' is not available or not configured
INFO:     127.0.0.1:56807 - "GET /api/translate/async/status/5215212a-1719-41ac-9b94-196dbbe8977c HTTP/1.1" 200 OK
 2025-10-10 16:02:48 - app.api.async_tasks.routes - INFO - 提交异步中译英任务: text_length=6, model=dashscope
2025-10-10 16:02:48 - app.services.async_task_manager - INFO - Created task 7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec of type TaskType.ZH2EN
2025-10-10 16:02:48 - app.api.async_tasks.routes - INFO - 异步中译英任务已提交: task_id=7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec
INFO:     127.0.0.1:57090 - "POST /api/translate/async/zh2en HTTP/1.1" 200 OK
2025-10-10 16:02:48 - app.services.async_task_manager - INFO - Starting execution of task 7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Creating service for model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Creating service with type: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 16:02:48 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 16:02:48 - app.services.langchain_service - WARNING - ⚠ Service created for dashscope but LLM is None
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - Initializing LangChainTranslationService with model: dashscope, use_chains: True
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - Initializing LangChain chains...
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Found service: True
Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Found service: True
Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Found service: True
Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Found service: True
Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Found service: True
Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Found service: True
Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - All chains initialized successfully
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - Starting zh2en translation: 6 characters
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Found service: True
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - self.llm is None, attempting to reinitialize...
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:02:48 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 16:02:48 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - Reinitialization failed, self.llm is still None
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - zh2en translation completed successfully
2025-10-10 16:02:48 - app.services.async_task_manager - INFO - Task 7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec completed successfully
INFO:     127.0.0.1:57098 - "GET /api/translate/async/status/7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec HTTP/1.1" 200 OK
Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 16:04:19 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 16:04:19 - app.main - INFO - 应用名称: Translate API
2025-10-10 16:04:19 - app.main - INFO - 调试模式: True
2025-10-10 16:04:19 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 16:04:19 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 16:04:19 - app.main - INFO - 全局异常处理器已注册
2025-10-10 16:04:19 - app.main - INFO - V1 API路由已注册
2025-10-10 16:04:19 - app.main - INFO - 翻译API路由已注册
2025-10-10 16:04:19 - app.main - INFO - 异步任务路由已注册
2025-10-10 16:04:19 - app.main - INFO - 流式API路由已注册
2025-10-10 16:04:19 - app.main - INFO - FastAPI应用初始化完成
INFO:     127.0.0.1:57951 - "GET /api/translate/async/callbacks/available HTTP/1.1" 200 OK
2025-10-10 16:11:46 - app.services.failure_callbacks - ERROR - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
INFO:     127.0.0.1:57955 - "POST /api/translate/async/callbacks/test?callback_name=log_failure HTTP/1.1" 200 OK
2025-10-10 16:11:48 - app.api.async_tasks.routes - INFO - 提交异步中译英任务: text_length=3, model=openaixx
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - Created task e18c44bf-47d4-45e3-9069-834acf2b9249 of type TaskType.ZH2EN
2025-10-10 16:11:48 - app.api.async_tasks.routes - INFO - 异步中译英任务已提交: task_id=e18c44bf-47d4-45e3-9069-834acf2b9249
INFO:     127.0.0.1:57961 - "POST /api/translate/async/zh2en HTTP/1.1" 200 OK
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - Starting execution of task e18c44bf-47d4-45e3-9069-834acf2b9249
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Creating service for model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Creating service with type: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Setting up DashScope LLM
2025-10-10 16:11:48 - app.services.langchain_service - INFO - DashScope API key found, creating LLM instance
2025-10-10 16:11:48 - app.services.langchain_service - ERROR - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:11:48 - app.services.langchain_service - ERROR - LLM initialization failed: self.llm is None
2025-10-10 16:11:48 - app.services.langchain_service - WARNING - ⚠ Service created for dashscope but LLM is None
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - Initializing LangChainTranslationService with model: openaixx, use_chains: True
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - Initializing LangChain chains...
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - All chains initialized successfully
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - Starting zh2en translation: 3 characters
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - Found service: False
2025-10-10 16:11:48 - app.services.langchain_translate - ERROR - zh2en translation failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 16:11:48 - app.services.async_task_manager - ERROR - Task e18c44bf-47d4-45e3-9069-834acf2b9249 failed (attempt 1): Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 16:11:48 - app.services.failure_callbacks - ERROR - Task e18c44bf-47d4-45e3-9069-834acf2b9249 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 16:11:48 - app.services.failure_callbacks - INFO - Saved failure details to logs\failures\task_failure_e18c44bf-47d4-45e3-9069-834acf2b9249_20251010_161148.json
2025-10-10 16:11:48 - app.services.failure_callbacks - INFO - Sent failure notification for task e18c44bf-47d4-45e3-9069-834acf2b9249
2025-10-10 16:11:48 - app.services.failure_callbacks - ERROR - Task e18c44bf-47d4-45e3-9069-834acf2b9249 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 16:11:48 - app.services.callback_registry - INFO - Would send email notification to test@example.com: 
            异步任务失败通知
            
            任务ID: e18c44bf-47d4-45e3-9069-834acf2b9249
          ...
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - Executed task-specific failure callback for task e18c44bf-47d4-45e3-9069-834acf2b9249
2025-10-10 16:11:48 - app.services.failure_callbacks - ERROR - Task e18c44bf-47d4-45e3-9069-834acf2b9249 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - Executed global failure callback: log_failure_callback
2025-10-10 16:11:48 - app.services.failure_callbacks - INFO - Saved failure details to logs\failures\task_failure_e18c44bf-47d4-45e3-9069-834acf2b9249_20251010_161148.json
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - Executed global failure callback: save_failure_to_file_callback
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - Executed global failure callback: cleanup_failed_task_data_callback
2025-10-10 16:11:48 - app.services.async_task_manager - ERROR - Task e18c44bf-47d4-45e3-9069-834acf2b9249 failed permanently after 0 retries: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
INFO:     127.0.0.1:57967 - "GET /api/translate/async/status/e18c44bf-47d4-45e3-9069-834acf2b9249 HTTP/1.1" 200 OK
 Using first existing config (no models found): D:\pythonProjects\Translate-my\app\config.yaml
Using config path: D:\pythonProjects\Translate-my\app\config.yaml
Warning: ai_model.models not found in loaded config. Check file path/content.
2025-10-10 16:49:41 - app.main - INFO - 正在初始化FastAPI应用...
2025-10-10 16:49:41 - app.main - INFO - 应用名称: Translate API
2025-10-10 16:49:41 - app.main - INFO - 调试模式: True
2025-10-10 16:49:41 - app.main - INFO - 主机: 127.0.0.1:8000
2025-10-10 16:49:41 - app.utils.error_handlers - INFO - Exception handlers registered successfully
2025-10-10 16:49:41 - app.main - INFO - 全局异常处理器已注册
2025-10-10 16:49:41 - app.main - INFO - V1 API路由已注册
2025-10-10 16:49:41 - app.main - INFO - 翻译API路由已注册
2025-10-10 16:49:42 - app.main - INFO - 异步任务路由已注册
2025-10-10 16:49:42 - app.main - INFO - 流式API路由已注册
2025-10-10 16:49:42 - app.main - INFO - FastAPI应用初始化完成
ame': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:45 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:45 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:45 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:124 - translate() - Starting translation: 12 chars, target: 中文, source: 英文
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:184 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:209 - en2zh() - en2zh translation completed successfully
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:124 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:184 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:209 - en2zh() - en2zh translation completed successfully
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?model=dashscope "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:124 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:184 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:209 - en2zh() - en2zh translation completed successfully
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?use_chains=false "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/models "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/prompt-types "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - app.api.stream.routes - INFO - routes.py:40 - stream_zh2en() - 开始流式中译英: text_length=5, model=None
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/zh2en "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/en2zh "HTTP/1.1 200 OK"
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]} openai_api_key='sk-your-actual-openai-api-key-here' openai_base_url='https://api.openai.com/v1' zhipuai_api_key='your-actual-zhipuai-api-key-here' dashscope_api_key='your-actual-dashscope-api-key-here' database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'openai', 'models': [{'name': 'openai', 'type': 'openai', 'model': 'gpt-3.5-turbo', 'base_url': 'https://api.openai.com/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'dashscope', 'type': 'dashscope', 'model': 'qwen-plus', 'base_url': 'https://dashscope.aliyuncs.com/api/v1', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}, {'name': 'zhipuai', 'type': 'zhipuai', 'model': 'glm-4', 'temperature': 0.7, 'max_tokens': 2000, 'timeout': 60}]}
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 11:47:46 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 11:47:46 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/summarize "HTTP/1.1 200 OK"
2025-10-10 12:04:14 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:04:14 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:04:14 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:04:14 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:04:14 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:04:14 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:04:14 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:04:14 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:04:14 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:04:14 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:04:14 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:10:49 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:10:49 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:10:49 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:10:49 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:10:49 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:10:49 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:10:49 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:10:49 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:10:49 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:10:49 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:10:49 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:10:49 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:10:49 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:10:49 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:10:49 - app.api.translate.routes - INFO - routes.py:350 - translate_en2zh() - 
2025-10-10 12:10:49 - app.services.translate - ERROR - translate.py:92 - en2zh() - Unexpected error in en2zh translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 82, in en2zh
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:10:49 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:11:33 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:11:33 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:11:33 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:11:34 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:11:34 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:11:34 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:11:34 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:11:34 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:11:34 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:11:34 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:11:34 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:11:34 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:11:34 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:11:35 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=6, model=None
2025-10-10 12:11:35 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "/app/app/services/translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:11:35 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:14:48 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=6, model=None
2025-10-10 12:14:48 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "/app/app/services/translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:14:48 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:15:22 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:15:22 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:15:22 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:15:22 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:15:22 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:15:22 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:15:22 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:15:22 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:15:22 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:15:22 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:15:22 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:15:25 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:15:25 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:15:25 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:15:25 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:15:25 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:15:25 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:15:25 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:15:25 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:15:25 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:15:25 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:15:25 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:15:26 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=6, model=
2025-10-10 12:15:26 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "/app/app/services/translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:15:26 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:22:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:22:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:22:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:22:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:22:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:22:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:22:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:22:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:22:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:22:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:22:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:23:17 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:23:17 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:23:17 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:23:17 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:23:17 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:23:17 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:23:17 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:23:17 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:23:17 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:23:17 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:23:17 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:23:22 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=6, model=
2025-10-10 12:23:22 - app.services.ai_model - INFO - ai_model.py:60 - chat_completion() - OpenAI chat_completion: model=gpt-3.5-turbo, messages_count=1
2025-10-10 12:23:24 - httpx - INFO - _client.py:1740 - _send_single_request() - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 401 Unauthorized"
2025-10-10 12:23:24 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Invalid OpenAI API key
2025-10-10 12:23:33 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:23:33 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:23:33 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:23:33 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:23:33 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:23:33 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:23:33 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:23:33 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:23:33 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:23:33 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:23:33 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:23:57 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=6, model=
2025-10-10 12:23:57 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "/app/app/services/translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 414, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/ai_model.py", line 390, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:23:57 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:25:12 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:25:12 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:25:12 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:25:12 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:25:12 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:25:12 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:25:12 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:25:12 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:25:12 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:25:12 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:25:12 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:25:51 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:25:51 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:25:51 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:25:51 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:25:51 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:25:51 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:25:51 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:25:51 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:25:51 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:25:51 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:25:51 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:26:45 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:26:45 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:26:45 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:26:45 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:26:45 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:26:45 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:26:45 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:26:45 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:26:45 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:26:45 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:26:45 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:26:49 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:26:49 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:26:49 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:26:49 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:26:49 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:26:49 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:26:49 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:26:49 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:26:49 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:26:49 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:26:49 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:26:53 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:26:53 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:26:53 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:26:53 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:26:53 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:26:53 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:26:53 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:26:53 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:26:53 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:26:53 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:26:53 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:28:57 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:28:57 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:28:57 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:28:57 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:28:57 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:28:57 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:28:57 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:28:57 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:28:57 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:28:57 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:28:57 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:29:13 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:29:13 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:29:13 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:29:13 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:29:13 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:29:13 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:29:13 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:29:13 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:29:13 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:29:13 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:29:13 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:30:02 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:30:02 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:30:02 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:30:02 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:30:02 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:30:02 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:30:02 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:30:02 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:30:02 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:30:02 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:30:02 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:33:03 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:33:03 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:33:03 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:33:03 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:33:03 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:33:03 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:33:03 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:33:03 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:33:03 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:33:03 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:33:03 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:42:41 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:42:41 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:42:41 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:42:41 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:42:41 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:42:41 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:42:41 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:42:41 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:42:41 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:42:41 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:42:41 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:44:21 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:44:21 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:44:21 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:44:21 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:44:21 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:44:21 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:44:21 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:44:21 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:44:21 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:44:21 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:44:21 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:44:21 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:44:21 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:45:56 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:45:56 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:45:56 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:45:56 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:45:56 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:45:56 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:45:56 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:45:56 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:45:56 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:45:56 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:45:56 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:46:15 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:46:15 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:46:15 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:46:15 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:46:15 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:46:15 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:46:15 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:46:15 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:46:15 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:46:15 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:46:15 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:50:08 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:50:08 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:50:08 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:50:08 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:50:08 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:50:08 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:50:08 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:50:08 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:50:08 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:50:08 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:50:08 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:50:15 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:50:15 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:50:15 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:50:15 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:50:15 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:50:15 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:50:15 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:50:15 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:50:15 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:50:15 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:50:15 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:53:01 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:53:01 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:53:01 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:53:01 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:53:01 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:53:01 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:53:01 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:53:01 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:53:01 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:53:01 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:53:01 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:53:28 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:53:28 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:57:18 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:57:18 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:57:26 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:57:26 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:57:26 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:57:26 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:57:26 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:57:26 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:57:26 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:57:26 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:57:26 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:57:26 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:57:26 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:57:42 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:57:42 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:58:41 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:58:41 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:58:41 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:58:41 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:58:41 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:58:41 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:58:41 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:58:41 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:58:41 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:58:41 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:58:41 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 12:58:50 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 12:58:50 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 12:59:46 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 12:59:46 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 12:59:46 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 12:59:46 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 12:59:46 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 12:59:46 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 12:59:46 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 12:59:46 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 12:59:46 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 12:59:46 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 12:59:46 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:00:22 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:00:22 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:00:22 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:00:22 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:00:22 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:00:22 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:00:22 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:00:22 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:00:22 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:00:22 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:00:22 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:00:28 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:00:28 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:00:28 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:00:28 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:00:28 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:00:28 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:00:28 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:00:28 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:00:28 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:00:28 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:00:28 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:01:26 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:01:26 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:01:26 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:01:26 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:01:26 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:01:26 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:01:26 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:01:26 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:01:26 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:01:26 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:01:26 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:02:07 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:02:07 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:02:07 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:02:07 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:02:07 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:02:07 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:02:07 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:02:07 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:02:07 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:02:07 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:02:07 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:02:24 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:02:24 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:02:24 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:02:24 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:02:24 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:02:24 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:02:24 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:02:24 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:02:24 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:02:24 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:02:24 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:02:28 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:02:28 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:02:28 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:02:28 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:02:28 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:02:28 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:02:28 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:02:28 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:02:28 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:02:28 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:02:28 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:05:01 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:05:01 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:05:01 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:05:01 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:05:01 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:05:01 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:05:01 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:05:01 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:05:01 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:05:01 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:05:01 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:05:18 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:05:18 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:05:18 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:05:18 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:05:18 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:05:18 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:05:18 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:05:18 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:05:18 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:05:18 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:05:18 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:06:53 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:06:53 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:06:53 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:06:53 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:06:53 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:06:53 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:06:53 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:06:53 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:06:53 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:06:53 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:06:53 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:06:57 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:06:57 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 13:09:30 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:09:30 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:09:30 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:09:30 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:09:30 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:09:30 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:09:30 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:09:30 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:09:30 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:09:30 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:09:30 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:09:55 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:09:55 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 13:12:04 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:12:04 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:12:04 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:12:04 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:12:04 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:12:04 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:12:04 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:12:04 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:12:04 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:12:04 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:12:04 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:12:20 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:12:20 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:12:20 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:12:20 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:12:20 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:12:20 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:12:20 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:12:20 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:12:20 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:12:20 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:12:20 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:12:38 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:12:38 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:12:38 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:12:38 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:12:38 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:12:38 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:12:38 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:12:38 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:12:38 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:12:38 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:12:38 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:12:54 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:12:54 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 13:13:05 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: No AI services initialized
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 421, in text_completion
    service = self.get_service(service_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 397, in get_service
    raise ValueError("No AI services initialized")
ValueError: No AI services initialized
2025-10-10 13:13:05 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: No AI services initialized
2025-10-10 13:13:55 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:13:55 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:13:55 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:13:55 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:13:55 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:13:55 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:13:55 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:13:55 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:13:55 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:13:55 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:13:55 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:14:06 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:14:06 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:14:06 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:14:06 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:14:06 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:14:06 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:14:06 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:14:06 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:14:06 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:14:06 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:14:06 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:14:12 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:14:12 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:14:12 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:14:12 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:14:12 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:14:12 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:14:12 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:14:12 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:14:12 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:14:12 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:14:12 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:15:25 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:15:25 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:15:25 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:15:25 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:15:25 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:15:25 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:15:25 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:15:25 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:15:25 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:15:25 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:15:25 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:16:43 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:16:43 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:16:43 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:16:43 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:16:43 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:16:43 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:16:43 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:16:43 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:16:43 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:16:43 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:16:43 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:17:21 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:17:21 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:17:21 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:17:21 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:17:21 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:17:21 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:17:21 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:17:21 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:17:21 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:17:21 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:17:21 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:17:25 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:17:25 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:17:25 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:17:25 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:17:25 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:17:25 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:17:25 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:17:25 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:17:25 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:17:25 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:17:25 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:17:31 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:17:31 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:17:31 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:17:31 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:17:31 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:17:31 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:17:31 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:17:31 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:17:31 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:17:31 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:17:31 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:17:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:17:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:17:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:17:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:17:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:17:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:17:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:17:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:17:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:17:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:17:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:19:03 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:19:03 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:19:03 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:19:03 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:19:03 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:19:03 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:19:03 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:19:03 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:19:03 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:19:03 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:19:03 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:19:08 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:19:08 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:19:08 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:19:08 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:19:08 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:19:08 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:19:08 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:19:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:19:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:19:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:19:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:20:10 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:20:10 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:20:10 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:20:10 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:20:10 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:20:10 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:20:10 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:20:10 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:20:10 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:20:10 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:20:10 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:20:14 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:20:14 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:20:14 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:20:14 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:20:14 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:20:14 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:20:14 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:20:14 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:20:14 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:20:14 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:20:14 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:20:21 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:20:21 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:20:21 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:20:21 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:20:21 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:20:21 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:20:21 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:20:21 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:20:21 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:20:21 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:20:21 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:20:28 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:20:28 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:20:28 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:20:28 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:20:28 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:20:28 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:20:28 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:20:28 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:20:28 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:20:28 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:20:28 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:27:19 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:27:19 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:27:19 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:27:19 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:27:19 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:27:19 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:27:19 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:27:19 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:27:19 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:27:19 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:27:19 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:27:55 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:27:55 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:27:55 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:27:55 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:27:55 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:27:55 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:27:55 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:27:55 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:27:55 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:27:55 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:27:55 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:29:36 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:29:36 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:29:36 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:29:36 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:29:36 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:29:36 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:29:36 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:29:36 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:29:36 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:29:36 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:29:36 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:30:14 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:30:14 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:30:14 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:30:14 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:30:14 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:30:14 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:30:14 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:30:14 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:30:14 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:30:14 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:30:14 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:30:18 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:30:18 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:30:18 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:30:18 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:30:18 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:30:18 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:30:18 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:30:18 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:30:18 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:30:18 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:30:18 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:30:54 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:30:54 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:30:54 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:30:54 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:30:54 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:30:54 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:30:54 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:30:54 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:30:54 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:30:54 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:30:54 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:32:55 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:32:55 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:32:55 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:32:55 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:32:55 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:32:55 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:32:55 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:32:55 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:32:55 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:32:55 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:32:55 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:32:59 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:32:59 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:32:59 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:32:59 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:32:59 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:32:59 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:32:59 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:32:59 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:32:59 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:32:59 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:32:59 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:33:49 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:33:49 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:33:49 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:33:49 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:33:49 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:33:49 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:33:49 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:33:49 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:33:49 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:33:49 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:33:49 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:33:59 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:33:59 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:33:59 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:33:59 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:33:59 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:33:59 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:33:59 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:33:59 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:33:59 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:33:59 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:33:59 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:34:03 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:34:03 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:34:03 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:34:03 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:34:03 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:34:03 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:34:03 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:34:03 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:34:03 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:34:03 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:34:03 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:35:19 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:35:19 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:35:19 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:35:19 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:35:19 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:35:19 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:35:19 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:35:19 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:35:19 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:35:19 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:35:19 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:35:23 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:35:23 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:35:23 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:35:23 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:35:23 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:35:23 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:35:23 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:35:23 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:35:23 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:35:23 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:35:23 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:39:52 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:39:52 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:39:52 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:39:52 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:39:52 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:39:52 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:39:52 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:39:52 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:39:52 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:39:52 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:39:52 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:39:53 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:39:53 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:39:53 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:39:53 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:39:53 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:39:53 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:39:53 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:39:53 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:39:53 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:39:53 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:39:53 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:43:07 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:43:07 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:43:07 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:43:07 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:43:07 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:43:07 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:43:07 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:43:07 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:43:07 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:43:07 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:43:07 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:43:07 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:43:07 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:43:07 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:45:52 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:45:52 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:45:52 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:45:52 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:45:52 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:45:52 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:45:52 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:45:52 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:45:52 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:45:52 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:45:52 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:45:55 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:45:55 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:45:55 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:45:55 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:45:55 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:45:55 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:45:55 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:45:55 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:45:55 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:45:55 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:45:55 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:45:57 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:45:57 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:45:57 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:45:57 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:45:57 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:45:57 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:45:57 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:45:57 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:45:57 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:45:57 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:45:57 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:46:02 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:46:02 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:46:02 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:46:02 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:46:02 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:46:02 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:46:02 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:46:02 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:46:02 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:46:02 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:46:02 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:46:06 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:46:06 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:46:06 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:46:06 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:46:06 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:46:06 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:46:06 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:46:06 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:46:06 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:46:06 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:46:06 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:46:24 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:46:24 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:46:24 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:46:24 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:46:24 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:46:24 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:46:24 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:46:24 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:46:25 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:46:25 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:46:25 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:46:31 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 13:46:31 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 13:46:31 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 13:46:31 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 13:46:31 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 13:46:39 - httpx - INFO - _client.py:1740 - _send_single_request() - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-10 13:46:46 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:46:46 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:46:46 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:46:46 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:46:46 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:46:46 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:46:46 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:46:46 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:46:46 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:46:46 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:46:46 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:47:21 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:47:21 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:47:21 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:47:21 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:47:21 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:47:21 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:47:21 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:47:21 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:47:21 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:47:21 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:47:21 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:47:25 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:47:25 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:47:25 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:47:25 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:47:25 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:47:25 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:47:25 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:47:25 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:47:25 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:47:25 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:47:25 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:47:27 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:47:27 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:47:27 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:47:27 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:47:27 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:47:27 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:47:27 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:47:27 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:47:27 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:47:27 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:47:27 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:47:30 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:47:30 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:47:30 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:47:30 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:47:30 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:47:30 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:47:30 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:47:30 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:47:30 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:47:30 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:47:30 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:48:37 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:48:37 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:48:37 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:48:37 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:48:37 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:48:37 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:48:37 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:48:37 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:48:37 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:48:37 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:48:37 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:48:45 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 13:48:45 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 13:48:45 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 13:48:45 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 13:48:45 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 13:49:05 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:49:05 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:49:05 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:49:05 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:49:05 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:49:05 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:49:05 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:49:05 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:49:05 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:49:05 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:49:05 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:53:55 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:53:55 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:53:55 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:53:55 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:53:55 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:53:55 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:53:55 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:53:55 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:53:55 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:53:55 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:53:55 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 13:54:13 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 13:54:13 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 13:54:13 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 13:54:13 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 13:54:13 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 13:54:13 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 13:54:13 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 13:54:13 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 13:54:13 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 13:54:13 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 13:54:13 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:08:25 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:08:25 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:08:25 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:08:25 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:08:25 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:08:25 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:08:25 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:08:25 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:08:25 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:08:25 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:08:25 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:09:42 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:09:42 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:09:42 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:09:42 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:09:42 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:09:42 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:09:42 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:09:42 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:09:42 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:09:42 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:09:42 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:12:28 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:12:28 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:12:28 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:12:28 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:12:28 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:12:28 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:12:28 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:12:28 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:12:28 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:12:28 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:12:28 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:12:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:12:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:12:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:12:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:12:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:12:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:12:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:12:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:12:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:12:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:12:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:13:42 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:13:42 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:13:42 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:13:42 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:13:42 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:13:42 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:13:42 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:13:42 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:13:42 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:13:42 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:13:42 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:13:54 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:13:54 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:13:54 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:13:54 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:13:54 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:13:54 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:13:54 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:13:54 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:13:54 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:13:54 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:13:54 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:15:32 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:15:32 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:15:32 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:15:32 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:15:32 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:15:32 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:15:32 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:15:32 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:15:32 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:15:32 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:15:32 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:15:59 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:15:59 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:15:59 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:15:59 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:15:59 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:15:59 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:15:59 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:15:59 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:15:59 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:15:59 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:15:59 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:17:45 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:17:45 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:17:45 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:17:45 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:17:45 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:17:45 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:17:45 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:17:45 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:17:45 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:17:45 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:17:45 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:17:49 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 14:17:49 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 14:17:49 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 14:17:49 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 14:17:49 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 14:17:50 - httpx - INFO - _client.py:1740 - _send_single_request() - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-10 14:23:36 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:23:36 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:23:36 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:23:36 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:23:36 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:23:36 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:23:36 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:23:36 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:23:36 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:23:36 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:23:36 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:24:46 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:24:46 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:24:46 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:24:46 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:24:46 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:24:46 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:24:46 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:24:46 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:24:46 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:24:46 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:24:46 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:25:58 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:25:58 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:25:58 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:25:58 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:25:58 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:25:58 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:25:58 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:25:58 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:25:58 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:25:58 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:25:58 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:26:01 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:26:01 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:26:01 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:26:01 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:26:01 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:26:01 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:26:01 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:26:01 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:26:01 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:26:01 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:26:01 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:26:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:26:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:26:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:26:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:26:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:26:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:26:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:26:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:26:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:26:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:26:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:26:14 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 14:26:14 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 14:26:14 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 14:26:14 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 14:26:14 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 14:26:18 - httpx - INFO - _client.py:1740 - _send_single_request() - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 401 Unauthorized"
2025-10-10 14:26:18 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: Client error '401 Unauthorized' for url 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 453, in text_completion
    return await service.text_completion(prompt, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 331, in text_completion
    return await self.chat_completion(messages, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 300, in chat_completion
    response.raise_for_status()
  File "D:\python\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-10-10 14:26:18 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: Client error '401 Unauthorized' for url 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-10-10 14:28:26 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:28:26 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:28:26 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:28:26 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:28:26 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:28:26 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:28:26 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:28:26 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:28:26 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:28:26 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:28:26 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:29:04 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:29:04 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:29:04 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:29:04 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:29:04 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:29:04 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:29:04 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:29:04 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:29:04 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:29:04 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:29:04 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:31:02 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:31:02 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:31:02 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:31:02 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:31:02 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:31:02 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:31:02 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:31:02 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:31:02 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:31:02 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:31:02 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:31:06 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:31:06 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:31:06 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:31:06 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:31:06 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:31:06 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:31:06 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:31:06 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:31:06 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:31:06 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:31:06 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:55:15 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 14:55:15 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 14:55:15 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 14:55:15 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 14:55:15 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 14:55:15 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 14:55:15 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 14:55:15 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 14:55:15 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 14:55:15 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 14:55:15 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 14:55:20 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 14:55:20 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 14:55:20 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 14:55:20 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 14:55:20 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 15:01:26 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:01:26 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:01:26 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:01:26 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:01:26 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:01:26 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:01:26 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:01:26 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:01:26 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:01:26 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:01:26 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:01:43 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:01:43 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:01:43 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:01:43 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:01:43 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:01:43 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:01:43 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:01:43 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:01:43 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:01:43 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:01:43 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:02:03 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:02:03 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:02:03 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:02:03 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:02:03 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:02:03 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:02:03 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:02:03 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:02:03 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:02:03 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:02:04 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:02:39 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:02:39 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:02:39 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:02:39 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:02:39 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:02:39 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:02:39 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:02:39 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:02:39 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:02:39 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:02:39 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:12:33 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:12:33 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:12:33 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:12:33 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:12:33 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:12:33 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:12:33 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:12:33 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:12:33 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:12:33 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:12:33 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:12:36 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:12:36 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:12:36 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:12:36 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:12:36 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:12:36 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:12:36 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:12:36 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:12:36 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:12:36 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:12:36 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:18:18 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:18:18 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:18:18 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:18:18 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:18:18 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:18:18 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:18:18 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:18:18 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:18:18 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:18:18 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:18:18 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:18:37 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:18:37 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:18:37 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:18:37 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:18:37 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:18:37 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:18:37 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:18:37 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:18:37 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:18:37 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:18:37 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:18:47 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:18:47 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:18:47 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:18:47 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:18:47 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:18:47 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:18:47 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:18:47 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:18:47 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:18:47 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:18:47 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:18:54 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:18:54 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:18:54 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:18:54 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:18:54 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:18:54 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:18:54 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:18:54 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:18:54 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:18:54 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:18:54 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:19:12 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:19:12 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:19:12 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:19:12 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:19:12 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:19:12 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:19:12 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:19:12 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:19:12 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:19:12 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:19:12 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:19:29 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:19:29 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:19:29 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:19:29 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:19:29 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:19:29 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:19:29 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:19:29 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:19:29 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:19:29 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:19:29 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:19:42 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:19:42 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:19:42 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:19:42 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:19:42 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:19:42 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:19:42 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:19:42 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:19:42 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:19:42 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:19:42 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:20:29 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:20:29 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:20:29 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:20:29 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:20:29 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:20:29 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:20:29 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:20:29 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:20:29 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:20:29 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:20:29 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:20:31 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:20:31 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:20:31 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:20:31 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:20:31 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:20:31 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:20:31 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:20:31 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:20:31 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:20:31 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:20:31 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:31:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:31:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:31:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:31:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:31:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:31:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:31:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:31:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:31:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:31:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:31:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:31:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:31:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:31:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:31:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:31:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:31:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:31:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:31:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:31:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:31:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:31:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:31:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:31:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:31:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:31:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:31:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:31:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:31:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:31:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:32:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:32:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:32:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:32:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:32:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:32:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:32:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:32:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:32:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:32:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:32:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:32:09 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 15:32:09 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 15:32:09 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 15:32:09 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 15:32:09 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 15:32:14 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
2025-10-10 15:32:16 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 15:32:18 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=6, model=openai
2025-10-10 15:32:18 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 1db13144-89ea-4ade-a006-758344b49646 of type TaskType.ZH2EN
2025-10-10 15:32:18 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=1db13144-89ea-4ade-a006-758344b49646
2025-10-10 15:32:18 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 1db13144-89ea-4ade-a006-758344b49646
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:286 - _create_service() - Creating service for model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:298 - _create_service() - Creating service with type: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 15:32:18 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:32:18 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 15:32:18 - app.services.langchain_service - WARNING - langchain_service.py:305 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: openai, use_chains: True
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - langchain_translate.py:148 - zh2en() - Starting zh2en translation: 6 characters
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:32:18 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:32:18 - app.services.langchain_translate - INFO - langchain_translate.py:175 - zh2en() - zh2en translation completed successfully
2025-10-10 15:32:18 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 1db13144-89ea-4ade-a006-758344b49646 completed successfully
2025-10-10 15:34:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:34:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:34:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:34:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:34:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:34:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:34:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:34:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:34:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:34:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:34:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:34:48 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:34:48 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:34:48 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:34:48 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:34:48 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:34:48 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:34:48 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:34:48 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:34:48 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:34:48 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:34:48 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:34:48 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 15:34:48 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 15:34:48 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 15:34:48 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 15:34:48 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 15:34:52 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
2025-10-10 15:34:54 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 15:36:52 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:36:52 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:36:52 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:36:52 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:36:52 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:36:52 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:36:52 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:36:52 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:36:52 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:36:52 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:36:52 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:36:52 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 15:36:52 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 15:36:52 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 15:36:52 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 15:36:52 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 15:36:56 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
2025-10-10 15:36:58 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 15:37:00 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=6, model=openai
2025-10-10 15:37:00 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 67a43040-0365-403a-b562-dcc96dcf35a6 of type TaskType.ZH2EN
2025-10-10 15:37:00 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=67a43040-0365-403a-b562-dcc96dcf35a6
2025-10-10 15:37:00 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 67a43040-0365-403a-b562-dcc96dcf35a6
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:286 - _create_service() - Creating service for model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:298 - _create_service() - Creating service with type: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 15:37:00 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:37:00 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 15:37:00 - app.services.langchain_service - WARNING - langchain_service.py:305 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: openai, use_chains: True
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - langchain_translate.py:148 - zh2en() - Starting zh2en translation: 6 characters
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 15:37:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:37:00 - app.services.langchain_translate - INFO - langchain_translate.py:175 - zh2en() - zh2en translation completed successfully
2025-10-10 15:37:00 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 67a43040-0365-403a-b562-dcc96dcf35a6 completed successfully
2025-10-10 15:39:17 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:39:17 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:39:17 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:39:17 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:39:17 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:39:17 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:39:17 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:39:17 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:39:17 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:39:18 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:39:18 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:39:18 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:39:18 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:39:18 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:39:18 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:39:18 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:39:18 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:39:18 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:39:18 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:39:18 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:39:18 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:39:18 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:39:18 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 15:39:18 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 15:39:18 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 15:39:18 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 15:39:18 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 15:39:22 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
2025-10-10 15:39:24 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=3, model=openaixx
2025-10-10 15:39:24 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 23907512-5851-44b7-8fe0-d486499c52e1 of type TaskType.ZH2EN
2025-10-10 15:39:24 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=23907512-5851-44b7-8fe0-d486499c52e1
2025-10-10 15:39:24 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 23907512-5851-44b7-8fe0-d486499c52e1
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:286 - _create_service() - Creating service for model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:298 - _create_service() - Creating service with type: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 15:39:24 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:39:24 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 15:39:24 - app.services.langchain_service - WARNING - langchain_service.py:305 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: openaixx, use_chains: True
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - langchain_translate.py:148 - zh2en() - Starting zh2en translation: 3 characters
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:39:24 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:39:24 - app.services.langchain_translate - INFO - langchain_translate.py:175 - zh2en() - zh2en translation completed successfully
2025-10-10 15:39:24 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 23907512-5851-44b7-8fe0-d486499c52e1 completed successfully
2025-10-10 15:39:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:39:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:39:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:39:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:39:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:39:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:39:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:39:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:39:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:39:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:39:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:41:07 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:41:07 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:41:07 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:41:07 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:41:07 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:41:07 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:41:07 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:41:07 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:41:07 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:41:07 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:41:07 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:45:20 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:45:20 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:45:20 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:45:20 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:45:20 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:45:20 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:45:20 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:45:20 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:45:20 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:45:20 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:45:20 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:45:37 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:45:37 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:45:37 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:45:37 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:45:37 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:45:37 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:45:37 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:45:37 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:45:37 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:45:37 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:45:37 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:45:51 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:45:51 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:45:51 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:45:51 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:45:51 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:45:51 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:45:51 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:45:51 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:45:51 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:45:51 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:45:51 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:46:07 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:46:07 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:46:07 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:46:07 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:46:07 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:46:07 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:46:07 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:46:07 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:46:07 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:46:07 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:46:07 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:46:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:46:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:46:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:46:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:46:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:46:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:46:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:46:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:46:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:46:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:46:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:46:19 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:46:19 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:46:19 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:46:19 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:46:19 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:46:19 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:46:19 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:46:19 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:46:19 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:46:19 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:46:19 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:54:19 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:54:19 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:54:19 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:54:19 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:54:19 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:54:19 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:54:19 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:54:19 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:54:19 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:54:19 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:54:19 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:54:19 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:54:19 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:54:19 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:54:19 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:54:19 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:54:19 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:54:19 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:54:19 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:55:34 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:55:34 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:55:34 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:55:34 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:55:34 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:55:34 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:55:34 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:55:34 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:55:34 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:55:34 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:55:34 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:55:53 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 15:55:53 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 15:55:53 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 15:55:53 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 15:55:53 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 15:55:53 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 15:55:53 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 15:55:53 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 15:55:53 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 15:55:53 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 15:55:53 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 15:55:53 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 15:55:53 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 15:55:53 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 15:55:53 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 15:55:53 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 15:55:57 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
2025-10-10 15:55:59 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=3, model=openaixx
2025-10-10 15:55:59 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 470a535c-aa3f-41c1-bea3-21fc66420e54 of type TaskType.ZH2EN
2025-10-10 15:55:59 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=470a535c-aa3f-41c1-bea3-21fc66420e54
2025-10-10 15:55:59 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 470a535c-aa3f-41c1-bea3-21fc66420e54
2025-10-10 15:55:59 - app.services.langchain_service - INFO - langchain_service.py:286 - _create_service() - Creating service for model: dashscope
2025-10-10 15:55:59 - app.services.langchain_service - INFO - langchain_service.py:298 - _create_service() - Creating service with type: dashscope
2025-10-10 15:55:59 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 15:55:59 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 15:55:59 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 15:55:59 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 15:55:59 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 15:55:59 - app.services.langchain_service - WARNING - langchain_service.py:305 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 15:55:59 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: openaixx, use_chains: True
2025-10-10 15:55:59 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 15:55:59 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:55:59 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:56:00 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 15:56:00 - app.services.langchain_translate - INFO - langchain_translate.py:148 - zh2en() - Starting zh2en translation: 3 characters
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 15:56:00 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 15:56:00 - app.services.langchain_translate - ERROR - langchain_translate.py:179 - zh2en() - zh2en translation failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 15:56:00 - app.services.async_task_manager - ERROR - async_task_manager.py:333 - _execute_task() - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 failed (attempt 1): Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 15:56:00 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 15:56:00 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_470a535c-aa3f-41c1-bea3-21fc66420e54_20251010_155600.json
2025-10-10 15:56:00 - app.services.failure_callbacks - INFO - failure_callbacks.py:75 - send_notification_callback() - Sent failure notification for task 470a535c-aa3f-41c1-bea3-21fc66420e54
2025-10-10 15:56:00 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 15:56:00 - app.services.callback_registry - INFO - callback_registry.py:105 - email_notification_callback() - Would send email notification to test@example.com: 
            异步任务失败通知
            
            任务ID: 470a535c-aa3f-41c1-bea3-21fc66420e54
          ...
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - async_task_manager.py:238 - _execute_failure_callbacks() - Executed task-specific failure callback for task 470a535c-aa3f-41c1-bea3-21fc66420e54
2025-10-10 15:56:00 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: log_failure_callback
2025-10-10 15:56:00 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_470a535c-aa3f-41c1-bea3-21fc66420e54_20251010_155600.json
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: save_failure_to_file_callback
2025-10-10 15:56:00 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: cleanup_failed_task_data_callback
2025-10-10 15:56:00 - app.services.async_task_manager - ERROR - async_task_manager.py:357 - _execute_task() - Task 470a535c-aa3f-41c1-bea3-21fc66420e54 failed permanently after 0 retries: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 16:00:56 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:00:56 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:00:56 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:00:56 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:00:56 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:00:56 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:00:56 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:00:56 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:00:56 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:00:56 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:00:56 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 16:00:56 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 16:00:56 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 16:00:56 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 16:00:56 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 16:00:56 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 16:00:58 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=6, model=openai
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 5215212a-1719-41ac-9b94-196dbbe8977c of type TaskType.ZH2EN
2025-10-10 16:00:58 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=5215212a-1719-41ac-9b94-196dbbe8977c
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 5215212a-1719-41ac-9b94-196dbbe8977c
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:286 - _create_service() - Creating service for model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:298 - _create_service() - Creating service with type: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 16:00:58 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:00:58 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 16:00:58 - app.services.langchain_service - WARNING - langchain_service.py:305 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: openai, use_chains: True
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 16:00:58 - app.services.langchain_translate - INFO - langchain_translate.py:148 - zh2en() - Starting zh2en translation: 6 characters
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openai
2025-10-10 16:00:58 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:00:58 - app.services.langchain_translate - ERROR - langchain_translate.py:179 - zh2en() - zh2en translation failed: Model 'No service available for text generation. Requested service: openai' is not available or not configured
2025-10-10 16:00:58 - app.services.async_task_manager - ERROR - async_task_manager.py:333 - _execute_task() - Task 5215212a-1719-41ac-9b94-196dbbe8977c failed (attempt 1): Model 'No service available for text generation. Requested service: openai' is not available or not configured
2025-10-10 16:00:58 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task 5215212a-1719-41ac-9b94-196dbbe8977c (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openai' is not available or not configured (Retry 0/1)
2025-10-10 16:00:58 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_5215212a-1719-41ac-9b94-196dbbe8977c_20251010_160058.json
2025-10-10 16:00:58 - app.services.failure_callbacks - INFO - failure_callbacks.py:75 - send_notification_callback() - Sent failure notification for task 5215212a-1719-41ac-9b94-196dbbe8977c
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - async_task_manager.py:238 - _execute_failure_callbacks() - Executed task-specific failure callback for task 5215212a-1719-41ac-9b94-196dbbe8977c
2025-10-10 16:00:58 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task 5215212a-1719-41ac-9b94-196dbbe8977c (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openai' is not available or not configured (Retry 0/1)
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: log_failure_callback
2025-10-10 16:00:58 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_5215212a-1719-41ac-9b94-196dbbe8977c_20251010_160058.json
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: save_failure_to_file_callback
2025-10-10 16:00:58 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: cleanup_failed_task_data_callback
2025-10-10 16:00:58 - app.services.async_task_manager - ERROR - async_task_manager.py:357 - _execute_task() - Task 5215212a-1719-41ac-9b94-196dbbe8977c failed permanently after 0 retries: Model 'No service available for text generation. Requested service: openai' is not available or not configured
2025-10-10 16:02:46 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:02:46 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:02:46 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:02:46 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:02:46 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:02:46 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 16:02:46 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:02:46 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:02:46 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:02:46 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:02:46 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:02:46 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:02:46 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 16:02:46 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 16:02:46 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 16:02:46 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 16:02:46 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 16:02:46 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 16:02:48 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=6, model=dashscope
2025-10-10 16:02:48 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec of type TaskType.ZH2EN
2025-10-10 16:02:48 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec
2025-10-10 16:02:48 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:286 - _create_service() - Creating service for model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:298 - _create_service() - Creating service with type: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 16:02:48 - app.services.langchain_service - WARNING - langchain_service.py:305 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: dashscope, use_chains: True
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: True
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: True
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: True
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: True
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: True
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: True
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - langchain_translate.py:148 - zh2en() - Starting zh2en translation: 6 characters
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: dashscope
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: True
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - langchain_service.py:160 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 16:02:48 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 16:02:48 - app.services.langchain_service - ERROR - langchain_service.py:164 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 16:02:48 - app.services.langchain_translate - INFO - langchain_translate.py:175 - zh2en() - zh2en translation completed successfully
2025-10-10 16:02:48 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 7c8c27ba-0bf8-4ae2-b3cd-bed0e2f50cec completed successfully
2025-10-10 16:04:19 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:04:19 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:04:19 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:04:19 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:04:19 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:04:19 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:04:19 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:04:19 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:04:19 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:04:19 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:04:19 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 16:05:34 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:05:34 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:05:34 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:05:34 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:05:34 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:05:34 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:05:34 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:05:34 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:05:34 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:05:34 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:05:34 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 16:11:42 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:11:42 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:11:42 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:11:42 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:11:42 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:11:42 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:11:42 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:11:42 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:11:42 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:11:42 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:11:42 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 16:11:42 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 16:11:42 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 16:11:42 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 16:11:42 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 16:11:42 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 16:11:46 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
2025-10-10 16:11:48 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=3, model=openaixx
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task e18c44bf-47d4-45e3-9069-834acf2b9249 of type TaskType.ZH2EN
2025-10-10 16:11:48 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=e18c44bf-47d4-45e3-9069-834acf2b9249
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task e18c44bf-47d4-45e3-9069-834acf2b9249
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:286 - _create_service() - Creating service for model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:298 - _create_service() - Creating service with type: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:68 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:98 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:101 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 16:11:48 - app.services.langchain_service - ERROR - langchain_service.py:114 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 16:11:48 - app.services.langchain_service - ERROR - langchain_service.py:141 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 16:11:48 - app.services.langchain_service - WARNING - langchain_service.py:305 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: openaixx, use_chains: True
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 16:11:48 - app.services.langchain_translate - INFO - langchain_translate.py:148 - zh2en() - Starting zh2en translation: 3 characters
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:328 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:329 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:330 - get_service() - Default model: dashscope
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:343 - get_service() - Looking for service: openaixx
2025-10-10 16:11:48 - app.services.langchain_service - INFO - langchain_service.py:345 - get_service() - Found service: False
2025-10-10 16:11:48 - app.services.langchain_translate - ERROR - langchain_translate.py:179 - zh2en() - zh2en translation failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 16:11:48 - app.services.async_task_manager - ERROR - async_task_manager.py:333 - _execute_task() - Task e18c44bf-47d4-45e3-9069-834acf2b9249 failed (attempt 1): Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 16:11:48 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task e18c44bf-47d4-45e3-9069-834acf2b9249 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 16:11:48 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_e18c44bf-47d4-45e3-9069-834acf2b9249_20251010_161148.json
2025-10-10 16:11:48 - app.services.failure_callbacks - INFO - failure_callbacks.py:75 - send_notification_callback() - Sent failure notification for task e18c44bf-47d4-45e3-9069-834acf2b9249
2025-10-10 16:11:48 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task e18c44bf-47d4-45e3-9069-834acf2b9249 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 16:11:48 - app.services.callback_registry - INFO - callback_registry.py:105 - email_notification_callback() - Would send email notification to test@example.com: 
            异步任务失败通知
            
            任务ID: e18c44bf-47d4-45e3-9069-834acf2b9249
          ...
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - async_task_manager.py:238 - _execute_failure_callbacks() - Executed task-specific failure callback for task e18c44bf-47d4-45e3-9069-834acf2b9249
2025-10-10 16:11:48 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task e18c44bf-47d4-45e3-9069-834acf2b9249 (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: log_failure_callback
2025-10-10 16:11:48 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_e18c44bf-47d4-45e3-9069-834acf2b9249_20251010_161148.json
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: save_failure_to_file_callback
2025-10-10 16:11:48 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: cleanup_failed_task_data_callback
2025-10-10 16:11:48 - app.services.async_task_manager - ERROR - async_task_manager.py:357 - _execute_task() - Task e18c44bf-47d4-45e3-9069-834acf2b9249 failed permanently after 0 retries: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 16:48:31 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:48:31 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:48:31 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:48:31 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:48:31 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:48:31 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:48:31 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:48:31 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:48:31 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:48:31 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:48:31 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 16:49:41 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 16:49:41 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 16:49:41 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 16:49:41 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 16:49:41 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 16:49:41 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 16:49:41 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 16:49:41 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 16:49:42 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 16:49:42 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 16:49:42 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:01:00 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:01:00 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:01:00 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:01:00 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:01:00 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:01:00 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:01:00 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:01:00 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:01:00 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:01:00 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:01:00 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:13:12 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:13:12 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:13:12 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:13:12 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:13:12 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:13:12 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:13:12 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:13:12 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:13:12 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:13:12 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:13:12 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:26:00 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:26:00 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:26:00 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:26:00 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:26:00 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:26:00 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:26:00 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:26:00 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:26:00 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:26:00 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:26:00 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:26:00 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:26:00 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:26:00 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:26:00 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:26:00 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/v1/health "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.api.v1.routes - INFO - routes.py:17 - greet() - 收到问候请求: Alice
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/v1/greet/Alice "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=5, model=None
2025-10-10 17:26:00 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=zh2en, result_length=18
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=en2zh, text_length=12, model=None
2025-10-10 17:26:00 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=en2zh, result_length=18
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=summarize, text_length=300, model=None
2025-10-10 17:26:00 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=summarize, result_length=18
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task f2331731-5299-46e8-ae38-27e37347a3b4 of type TaskType.STRUCTURED_SUMMARY
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task f2331731-5299-46e8-ae38-27e37347a3b4
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:00 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:00 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:00 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:00 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:00 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:00 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task f2331731-5299-46e8-ae38-27e37347a3b4 completed successfully
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/structured-summary?max_length=50 "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'f2331731-5299-46e8-ae38-27e37347a3b4' not found
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/async/cancel/f2331731-5299-46e8-ae38-27e37347a3b4 "HTTP/1.1 404 Not Found"
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/f2331731-5299-46e8-ae38-27e37347a3b4 "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/f2331731-5299-46e8-ae38-27e37347a3b4 "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=5, model=None
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 1fed0093-bb50-4338-8164-264d12747ba3 of type TaskType.ZH2EN
2025-10-10 17:26:00 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=1fed0093-bb50-4338-8164-264d12747ba3
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 1fed0093-bb50-4338-8164-264d12747ba3
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 1fed0093-bb50-4338-8164-264d12747ba3 completed successfully
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/1fed0093-bb50-4338-8164-264d12747ba3 "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/1fed0093-bb50-4338-8164-264d12747ba3 "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 868aba6c-db7b-4f6e-b740-ff01bcb7dcf5 of type TaskType.EN2ZH
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 868aba6c-db7b-4f6e-b740-ff01bcb7dcf5
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 868aba6c-db7b-4f6e-b740-ff01bcb7dcf5 completed successfully
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/868aba6c-db7b-4f6e-b740-ff01bcb7dcf5 "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/868aba6c-db7b-4f6e-b740-ff01bcb7dcf5 "HTTP/1.1 200 OK"
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task dfce2529-7270-4c48-b375-e39f4b243d62 of type TaskType.SUMMARIZE
2025-10-10 17:26:00 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task dfce2529-7270-4c48-b375-e39f4b243d62
2025-10-10 17:26:01 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task dfce2529-7270-4c48-b375-e39f4b243d62 completed successfully
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/summarize "HTTP/1.1 200 OK"
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/dfce2529-7270-4c48-b375-e39f4b243d62 "HTTP/1.1 200 OK"
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/dfce2529-7270-4c48-b375-e39f4b243d62 "HTTP/1.1 200 OK"
2025-10-10 17:26:01 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 2 errors
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:01 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=3, model=None
2025-10-10 17:26:01 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Text cannot be empty
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:26:01 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'non-existent-task-id' not found
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/non-existent-task-id "HTTP/1.1 404 Not Found"
2025-10-10 17:26:01 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:01 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:01 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Model 'non-existent-model' is not available. Available models: ['mock_openai']
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:26:01 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=4, model=None
2025-10-10 17:26:01 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 4232fc30-0fbe-4361-ab26-5936b91dbe88 of type TaskType.ZH2EN
2025-10-10 17:26:01 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=4232fc30-0fbe-4361-ab26-5936b91dbe88
2025-10-10 17:26:01 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 4232fc30-0fbe-4361-ab26-5936b91dbe88
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:01 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 4 characters
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:26:01 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 4232fc30-0fbe-4361-ab26-5936b91dbe88 completed successfully
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:26:01 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:01 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'invalid-id' not found
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/invalid-id "HTTP/1.1 404 Not Found"
2025-10-10 17:26:01 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'test-task-123' not found
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/test-task-123 "HTTP/1.1 404 Not Found"
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:01 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:01 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:01 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:01 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:01 - app.api.translate.routes - ERROR - routes.py:289 - inspect_chain() - Chain inspection error: Chain 'non-existent-chain' not found
2025-10-10 17:26:01 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Chain 'non-existent-chain' not found or inspection failed
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/chains/inspect/non-existent-chain "HTTP/1.1 404 Not Found"
2025-10-10 17:26:01 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Invalid prompt configuration
2025-10-10 17:26:01 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/validate-prompt "HTTP/1.1 400 Bad Request"
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:09 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:26:09 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:09 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:26:09 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:09 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:09 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:09 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:09 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/langchain/chains/list "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/langchain/chains/clear "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: 英文
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?model=dashscope "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?use_chains=false "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/models "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/prompt-types "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.api.stream.routes - INFO - routes.py:40 - stream_zh2en() - 开始流式中译英: text_length=5, model=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:26:10 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:26:10 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:26:10 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:26:10 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/summarize "HTTP/1.1 200 OK"
2025-10-10 17:27:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:27:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:27:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:27:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:27:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:27:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:27:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:27:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:27:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:27:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:27:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:27:09 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:27:09 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:27:09 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:27:09 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:27:09 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:28:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:28:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:28:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:28:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:28:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:28:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:28:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:28:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:28:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:28:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:28:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:28:40 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:28:40 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:28:40 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:28:40 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:28:40 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:30:48 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:30:48 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:30:48 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:30:48 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:30:48 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:30:48 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:30:48 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:30:48 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:30:48 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:30:48 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:30:48 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:31:01 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:31:01 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:31:01 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:31:01 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:31:01 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:31:01 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:31:01 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:31:01 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:31:01 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:31:02 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:31:02 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:31:02 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:31:02 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:31:02 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:31:02 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:31:02 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:31:06 - app.api.v1.routes - INFO - routes.py:17 - greet() - 收到问候请求: Tester
2025-10-10 17:31:14 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=6, model=None
2025-10-10 17:31:14 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:31:14 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:31:14 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:31:14 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:31:14 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:31:15 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: Request URL is missing an 'http://' or 'https://' protocol.
Traceback (most recent call last):
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 207, in handle_async_request
    raise UnsupportedProtocol(
httpcore.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 453, in text_completion
    return await service.text_completion(prompt, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 331, in text_completion
    return await self.chat_completion(messages, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 315, in chat_completion
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "D:\python\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:15 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:17 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=en2zh, text_length=13, model=None
2025-10-10 17:31:18 - app.services.translate - ERROR - translate.py:92 - en2zh() - Unexpected error in en2zh translation: Request URL is missing an 'http://' or 'https://' protocol.
Traceback (most recent call last):
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 207, in handle_async_request
    raise UnsupportedProtocol(
httpcore.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 82, in en2zh
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 453, in text_completion
    return await service.text_completion(prompt, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 331, in text_completion
    return await self.chat_completion(messages, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 315, in chat_completion
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "D:\python\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:18 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:20 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=auto_translate, text_length=46, model=None
2025-10-10 17:31:20 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=auto_translate, result_length=44
2025-10-10 17:31:22 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=summarize, text_length=70, model=None
2025-10-10 17:31:22 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=summarize, result_length=81
2025-10-10 17:31:24 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=keyword_summary, text_length=53, model=None
2025-10-10 17:31:24 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=keyword_summary, result_length=48
2025-10-10 17:31:26 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=structured_summary, text_length=50, model=None
2025-10-10 17:31:27 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=structured_summary, result_length=86
2025-10-10 17:31:30 - app.services.translate - ERROR - translate.py:64 - zh2en() - Unexpected error in zh2en translation: Request URL is missing an 'http://' or 'https://' protocol.
Traceback (most recent call last):
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 207, in handle_async_request
    raise UnsupportedProtocol(
httpcore.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 53, in zh2en
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 453, in text_completion
    return await service.text_completion(prompt, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 331, in text_completion
    return await self.chat_completion(messages, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 315, in chat_completion
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "D:\python\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:30 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:32 - app.api.translate.routes - INFO - routes.py:350 - translate_en2zh() - None
2025-10-10 17:31:33 - app.services.translate - ERROR - translate.py:92 - en2zh() - Unexpected error in en2zh translation: Request URL is missing an 'http://' or 'https://' protocol.
Traceback (most recent call last):
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 207, in handle_async_request
    raise UnsupportedProtocol(
httpcore.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\pythonProjects\Translate-my\app\services\translate.py", line 82, in en2zh
    result = await self.ai_manager.text_completion(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 453, in text_completion
    return await service.text_completion(prompt, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 331, in text_completion
    return await self.chat_completion(messages, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate-my\app\services\ai_model.py", line 315, in chat_completion
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "D:\python\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "D:\pythonProjects\Translate\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:33 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Translation failed: Request URL is missing an 'http://' or 'https://' protocol.
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:31:45 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:31:45 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:31:45 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:45 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:31:45 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 6 chars, target: 英文, source: None
2025-10-10 17:31:45 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 6 characters
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:31:45 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:31:45 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:31:45 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:31:47 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:31:47 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:31:47 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:31:47 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:31:47 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 2 characters
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:31:47 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:31:47 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:31:47 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:32:21 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:32:21 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:32:21 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:32:21 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:32:21 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:32:21 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:32:21 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:32:21 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:32:21 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:32:21 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:32:21 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:32:21 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:32:21 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:32:21 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:32:21 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:32:21 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/v1/health "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.api.v1.routes - INFO - routes.py:17 - greet() - 收到问候请求: Alice
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/v1/greet/Alice "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=5, model=None
2025-10-10 17:32:48 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=zh2en, result_length=18
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=en2zh, text_length=12, model=None
2025-10-10 17:32:48 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=en2zh, result_length=18
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=summarize, text_length=300, model=None
2025-10-10 17:32:48 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=summarize, result_length=18
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 96752173-a053-4eb2-a3ef-2eba9ca78761 of type TaskType.STRUCTURED_SUMMARY
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 96752173-a053-4eb2-a3ef-2eba9ca78761
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:48 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 96752173-a053-4eb2-a3ef-2eba9ca78761 completed successfully
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/structured-summary?max_length=50 "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task '96752173-a053-4eb2-a3ef-2eba9ca78761' not found
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/async/cancel/96752173-a053-4eb2-a3ef-2eba9ca78761 "HTTP/1.1 404 Not Found"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/96752173-a053-4eb2-a3ef-2eba9ca78761 "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/96752173-a053-4eb2-a3ef-2eba9ca78761 "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=5, model=None
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 0f6d36c2-38df-4a73-be4d-aebc9cbcbf7c of type TaskType.ZH2EN
2025-10-10 17:32:48 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=0f6d36c2-38df-4a73-be4d-aebc9cbcbf7c
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 0f6d36c2-38df-4a73-be4d-aebc9cbcbf7c
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 0f6d36c2-38df-4a73-be4d-aebc9cbcbf7c completed successfully
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/0f6d36c2-38df-4a73-be4d-aebc9cbcbf7c "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/0f6d36c2-38df-4a73-be4d-aebc9cbcbf7c "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task f15cdbef-13c1-4090-ae2e-04f094e34573 of type TaskType.EN2ZH
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task f15cdbef-13c1-4090-ae2e-04f094e34573
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task f15cdbef-13c1-4090-ae2e-04f094e34573 completed successfully
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/f15cdbef-13c1-4090-ae2e-04f094e34573 "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/f15cdbef-13c1-4090-ae2e-04f094e34573 "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task b4f861fc-7a2e-4b82-8767-9d0dc089bae6 of type TaskType.SUMMARIZE
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task b4f861fc-7a2e-4b82-8767-9d0dc089bae6
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task b4f861fc-7a2e-4b82-8767-9d0dc089bae6 completed successfully
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/summarize "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/b4f861fc-7a2e-4b82-8767-9d0dc089bae6 "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/b4f861fc-7a2e-4b82-8767-9d0dc089bae6 "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 2 errors
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:48 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=3, model=None
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Text cannot be empty
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'non-existent-task-id' not found
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/non-existent-task-id "HTTP/1.1 404 Not Found"
2025-10-10 17:32:48 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:48 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Model 'non-existent-model' is not available. Available models: ['mock_openai']
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:32:48 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=4, model=None
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 2f05c370-ebc5-4c78-8891-07d9ff7d22d2 of type TaskType.ZH2EN
2025-10-10 17:32:48 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=2f05c370-ebc5-4c78-8891-07d9ff7d22d2
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 2f05c370-ebc5-4c78-8891-07d9ff7d22d2
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:48 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 4 characters
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:32:48 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 2f05c370-ebc5-4c78-8891-07d9ff7d22d2 completed successfully
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:32:48 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'invalid-id' not found
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/invalid-id "HTTP/1.1 404 Not Found"
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'test-task-123' not found
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/test-task-123 "HTTP/1.1 404 Not Found"
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:48 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:48 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:48 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:48 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:48 - app.api.translate.routes - ERROR - routes.py:289 - inspect_chain() - Chain inspection error: Chain 'non-existent-chain' not found
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Chain 'non-existent-chain' not found or inspection failed
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/chains/inspect/non-existent-chain "HTTP/1.1 404 Not Found"
2025-10-10 17:32:48 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Invalid prompt configuration
2025-10-10 17:32:48 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/validate-prompt "HTTP/1.1 400 Bad Request"
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:50 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:32:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:50 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:32:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:50 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/langchain/chains/list "HTTP/1.1 200 OK"
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:50 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:50 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:50 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/langchain/chains/clear "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: 英文
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?model=dashscope "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?use_chains=false "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/models "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/prompt-types "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.api.stream.routes - INFO - routes.py:40 - stream_zh2en() - 开始流式中译英: text_length=5, model=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:32:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - app.services.langchain_service - ERROR - langchain_service.py:413 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:32:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:32:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:32:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/summarize "HTTP/1.1 200 OK"
2025-10-10 17:36:55 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:36:55 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:36:55 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:36:55 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:36:55 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:36:55 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:36:55 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:36:55 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:36:56 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:36:56 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:36:56 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:36:56 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:36:56 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:36:56 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:36:56 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:36:56 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:37:07 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:37:07 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:37:07 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:37:07 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:37:07 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:37:07 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:37:07 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:37:07 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:37:07 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:37:07 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:37:07 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:37:07 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:37:07 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:37:07 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:37:07 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:37:07 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:37:07 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=5, model=None
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task d88dd1c9-fb1b-4ff1-b292-9fb89d0592c4 of type TaskType.ZH2EN
2025-10-10 17:37:07 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=d88dd1c9-fb1b-4ff1-b292-9fb89d0592c4
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task d88dd1c9-fb1b-4ff1-b292-9fb89d0592c4
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task d88dd1c9-fb1b-4ff1-b292-9fb89d0592c4 completed successfully
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/d88dd1c9-fb1b-4ff1-b292-9fb89d0592c4 "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/d88dd1c9-fb1b-4ff1-b292-9fb89d0592c4 "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 8d089075-1ed9-40f7-96b0-d592d5ead48f of type TaskType.EN2ZH
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 8d089075-1ed9-40f7-96b0-d592d5ead48f
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 8d089075-1ed9-40f7-96b0-d592d5ead48f completed successfully
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/8d089075-1ed9-40f7-96b0-d592d5ead48f "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/8d089075-1ed9-40f7-96b0-d592d5ead48f "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 873ad48b-555c-4d3d-8695-71b299bd8b63 of type TaskType.SUMMARIZE
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 873ad48b-555c-4d3d-8695-71b299bd8b63
2025-10-10 17:37:07 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 873ad48b-555c-4d3d-8695-71b299bd8b63 completed successfully
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/summarize "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/873ad48b-555c-4d3d-8695-71b299bd8b63 "HTTP/1.1 200 OK"
2025-10-10 17:37:07 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/873ad48b-555c-4d3d-8695-71b299bd8b63 "HTTP/1.1 200 OK"
2025-10-10 17:37:53 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:37:53 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:37:53 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:37:53 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:37:53 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:37:53 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:37:53 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:37:53 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:37:53 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:37:53 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:37:53 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:37:53 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:37:53 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:37:53 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:37:53 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:37:53 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 48a89936-14a8-4e24-b675-06b2b45cbba0 of type TaskType.STRUCTURED_SUMMARY
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 48a89936-14a8-4e24-b675-06b2b45cbba0
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:37:54 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 48a89936-14a8-4e24-b675-06b2b45cbba0 completed successfully
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/structured-summary?max_length=50 "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task '48a89936-14a8-4e24-b675-06b2b45cbba0' not found
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/async/cancel/48a89936-14a8-4e24-b675-06b2b45cbba0 "HTTP/1.1 404 Not Found"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/48a89936-14a8-4e24-b675-06b2b45cbba0 "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/48a89936-14a8-4e24-b675-06b2b45cbba0 "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=5, model=None
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task d25a7111-2c08-4977-8c76-6bed4effa20f of type TaskType.ZH2EN
2025-10-10 17:37:54 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=d25a7111-2c08-4977-8c76-6bed4effa20f
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task d25a7111-2c08-4977-8c76-6bed4effa20f
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task d25a7111-2c08-4977-8c76-6bed4effa20f completed successfully
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/d25a7111-2c08-4977-8c76-6bed4effa20f "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/d25a7111-2c08-4977-8c76-6bed4effa20f "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 2a7085c3-9720-4775-9189-3cae70dd2163 of type TaskType.EN2ZH
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 2a7085c3-9720-4775-9189-3cae70dd2163
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 2a7085c3-9720-4775-9189-3cae70dd2163 completed successfully
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/2a7085c3-9720-4775-9189-3cae70dd2163 "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/2a7085c3-9720-4775-9189-3cae70dd2163 "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 04bd910d-46b4-4fd5-a682-7c3ec3dbb07d of type TaskType.SUMMARIZE
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 04bd910d-46b4-4fd5-a682-7c3ec3dbb07d
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 04bd910d-46b4-4fd5-a682-7c3ec3dbb07d completed successfully
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/summarize "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/04bd910d-46b4-4fd5-a682-7c3ec3dbb07d "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/04bd910d-46b4-4fd5-a682-7c3ec3dbb07d "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=4, model=None
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 35d9c924-0f82-47fb-87a3-6ee9dabad253 of type TaskType.ZH2EN
2025-10-10 17:37:54 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=35d9c924-0f82-47fb-87a3-6ee9dabad253
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 35d9c924-0f82-47fb-87a3-6ee9dabad253
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:37:54 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 4 characters
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:37:54 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:37:54 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:37:54 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:37:54 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 35d9c924-0f82-47fb-87a3-6ee9dabad253 completed successfully
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:37:54 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:37:54 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:16 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:38:16 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:38:16 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:38:16 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:38:16 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:38:16 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:38:16 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:38:16 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:38:16 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:38:16 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:38:16 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:38:16 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:38:16 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:38:16 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:38:16 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:38:16 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/v1/health "HTTP/1.1 200 OK"
2025-10-10 17:38:50 - app.api.v1.routes - INFO - routes.py:17 - greet() - 收到问候请求: Alice
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/v1/greet/Alice "HTTP/1.1 200 OK"
2025-10-10 17:38:50 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=5, model=None
2025-10-10 17:38:50 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=zh2en, result_length=18
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:38:50 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=en2zh, text_length=12, model=None
2025-10-10 17:38:50 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=en2zh, result_length=18
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:38:50 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=summarize, text_length=300, model=None
2025-10-10 17:38:50 - app.api.translate.routes - INFO - routes.py:76 - run_translate() - 翻译完成: task=summarize, result_length=18
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 200 OK"
2025-10-10 17:38:50 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task bfb910d1-a46b-4dca-ad78-fc444a074e25 of type TaskType.STRUCTURED_SUMMARY
2025-10-10 17:38:50 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task bfb910d1-a46b-4dca-ad78-fc444a074e25
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:50 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:50 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:50 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:50 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:50 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:50 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:38:50 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task bfb910d1-a46b-4dca-ad78-fc444a074e25 completed successfully
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/structured-summary?max_length=50 "HTTP/1.1 200 OK"
2025-10-10 17:38:50 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'bfb910d1-a46b-4dca-ad78-fc444a074e25' not found
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/async/cancel/bfb910d1-a46b-4dca-ad78-fc444a074e25 "HTTP/1.1 404 Not Found"
2025-10-10 17:38:50 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/bfb910d1-a46b-4dca-ad78-fc444a074e25 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/bfb910d1-a46b-4dca-ad78-fc444a074e25 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=5, model=None
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 5373c0df-fba9-4c38-ab5e-a87929b5bae5 of type TaskType.ZH2EN
2025-10-10 17:38:51 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=5373c0df-fba9-4c38-ab5e-a87929b5bae5
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 5373c0df-fba9-4c38-ab5e-a87929b5bae5
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 5373c0df-fba9-4c38-ab5e-a87929b5bae5 completed successfully
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/5373c0df-fba9-4c38-ab5e-a87929b5bae5 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/5373c0df-fba9-4c38-ab5e-a87929b5bae5 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 3316014d-d556-4fa2-9a73-880bb7850328 of type TaskType.EN2ZH
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 3316014d-d556-4fa2-9a73-880bb7850328
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 3316014d-d556-4fa2-9a73-880bb7850328 completed successfully
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/3316014d-d556-4fa2-9a73-880bb7850328 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/3316014d-d556-4fa2-9a73-880bb7850328 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 1d6a5487-4704-4b97-bada-bc75ffe1cb44 of type TaskType.SUMMARIZE
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 1d6a5487-4704-4b97-bada-bc75ffe1cb44
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 1d6a5487-4704-4b97-bada-bc75ffe1cb44 completed successfully
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/summarize "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/1d6a5487-4704-4b97-bada-bc75ffe1cb44 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/1d6a5487-4704-4b97-bada-bc75ffe1cb44 "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 2 errors
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:51 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=3, model=None
2025-10-10 17:38:51 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Text cannot be empty
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:38:51 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'non-existent-task-id' not found
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/non-existent-task-id "HTTP/1.1 404 Not Found"
2025-10-10 17:38:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:51 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Model 'non-existent-model' is not available. Available models: ['mock_openai']
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:38:51 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=4, model=None
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task c9322b65-6153-4c25-97d5-6d8fc9b6208e of type TaskType.ZH2EN
2025-10-10 17:38:51 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=c9322b65-6153-4c25-97d5-6d8fc9b6208e
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task c9322b65-6153-4c25-97d5-6d8fc9b6208e
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 4 characters
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:38:51 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task c9322b65-6153-4c25-97d5-6d8fc9b6208e completed successfully
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:38:51 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:51 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'invalid-id' not found
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/invalid-id "HTTP/1.1 404 Not Found"
2025-10-10 17:38:51 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'test-task-123' not found
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/test-task-123 "HTTP/1.1 404 Not Found"
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:51 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:51 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:51 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:51 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:51 - app.api.translate.routes - ERROR - routes.py:289 - inspect_chain() - Chain inspection error: Chain 'non-existent-chain' not found
2025-10-10 17:38:51 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Chain 'non-existent-chain' not found or inspection failed
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/chains/inspect/non-existent-chain "HTTP/1.1 404 Not Found"
2025-10-10 17:38:51 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Invalid prompt configuration
2025-10-10 17:38:51 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/validate-prompt "HTTP/1.1 400 Bad Request"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/langchain/chains/list "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/langchain/chains/clear "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: 英文
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?model=dashscope "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?use_chains=false "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/models "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/prompt-types "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.api.stream.routes - INFO - routes.py:40 - stream_zh2en() - 开始流式中译英: text_length=5, model=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:38:53 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:38:53 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:38:53 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:38:53 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/summarize "HTTP/1.1 200 OK"
2025-10-10 17:39:37 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:39:37 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:39:37 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:39:37 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:39:37 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:39:37 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:39:37 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:39:37 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:39:37 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:39:37 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:39:37 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:39:37 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:39:37 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:39:37 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:39:37 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:39:37 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:39:37 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 5b5ff106-58b2-46be-8f63-520a5338eacb of type TaskType.STRUCTURED_SUMMARY
2025-10-10 17:39:37 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 5b5ff106-58b2-46be-8f63-520a5338eacb
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:39:37 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:39:37 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:39:37 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:39:37 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:39:37 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:39:37 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:39:37 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 5b5ff106-58b2-46be-8f63-520a5338eacb completed successfully
2025-10-10 17:39:37 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/structured-summary?max_length=50 "HTTP/1.1 200 OK"
2025-10-10 17:39:37 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task '5b5ff106-58b2-46be-8f63-520a5338eacb' not found
2025-10-10 17:39:37 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/async/cancel/5b5ff106-58b2-46be-8f63-520a5338eacb "HTTP/1.1 404 Not Found"
2025-10-10 17:39:37 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/5b5ff106-58b2-46be-8f63-520a5338eacb "HTTP/1.1 200 OK"
2025-10-10 17:39:37 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/5b5ff106-58b2-46be-8f63-520a5338eacb "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:40:04 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:40:04 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:40:04 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:40:04 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:40:04 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:40:04 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:40:04 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:40:04 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:40:04 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:40:04 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:40:04 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:40:04 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:40:04 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:40:04 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:40:04 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:40:04 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=5, model=None
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 89f666ca-8081-465b-b564-0ff9fecf83c2 of type TaskType.ZH2EN
2025-10-10 17:40:04 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=89f666ca-8081-465b-b564-0ff9fecf83c2
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 89f666ca-8081-465b-b564-0ff9fecf83c2
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 89f666ca-8081-465b-b564-0ff9fecf83c2 completed successfully
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/89f666ca-8081-465b-b564-0ff9fecf83c2 "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/89f666ca-8081-465b-b564-0ff9fecf83c2 "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task f8e62a3e-3240-41de-b441-3b9be1c8a48e of type TaskType.EN2ZH
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task f8e62a3e-3240-41de-b441-3b9be1c8a48e
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task f8e62a3e-3240-41de-b441-3b9be1c8a48e completed successfully
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/f8e62a3e-3240-41de-b441-3b9be1c8a48e "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/f8e62a3e-3240-41de-b441-3b9be1c8a48e "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task b1ef059b-ca08-4fe9-9fd7-ceb770be1f3e of type TaskType.SUMMARIZE
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task b1ef059b-ca08-4fe9-9fd7-ceb770be1f3e
2025-10-10 17:40:04 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task b1ef059b-ca08-4fe9-9fd7-ceb770be1f3e completed successfully
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/summarize "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/b1ef059b-ca08-4fe9-9fd7-ceb770be1f3e "HTTP/1.1 200 OK"
2025-10-10 17:40:04 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/result/b1ef059b-ca08-4fe9-9fd7-ceb770be1f3e "HTTP/1.1 200 OK"
2025-10-10 17:40:28 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:40:28 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:40:28 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:40:28 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:40:28 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:40:28 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:40:28 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:40:28 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:40:28 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:40:28 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:40:28 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:40:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:40:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:40:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:40:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:40:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:40:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:40:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:40:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:40:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:40:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:40:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:40:40 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:40:40 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:40:40 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:40:40 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:40:40 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:40:52 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:40:52 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:40:52 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:40:52 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:40:52 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:40:52 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:40:52 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:40:52 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:40:52 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:40:52 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:40:52 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:40:52 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:40:52 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:40:52 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:40:52 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:40:52 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:42:09 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:42:09 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:42:09 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:42:09 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:42:09 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:42:09 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:42:09 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:42:09 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:42:09 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:42:09 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:42:09 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:42:09 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:42:09 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:42:09 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:42:09 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:42:09 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:42:58 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:42:58 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:42:58 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:42:58 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:42:58 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:42:58 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:42:58 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:42:58 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:42:58 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:42:58 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:42:58 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:42:58 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:42:58 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:42:58 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:42:58 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:42:58 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:42:58 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 2 errors
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:42:58 - app.api.translate.routes - INFO - routes.py:49 - run_translate() - 收到翻译请求: task=zh2en, text_length=3, model=None
2025-10-10 17:42:58 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Text cannot be empty
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:42:58 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'non-existent-task-id' not found
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/non-existent-task-id "HTTP/1.1 404 Not Found"
2025-10-10 17:42:58 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:42:58 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:42:58 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Model 'non-existent-model' is not available. Available models: ['mock_openai']
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/run "HTTP/1.1 400 Bad Request"
2025-10-10 17:42:58 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=4, model=None
2025-10-10 17:42:58 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 5828f1cb-1054-4a63-b752-e653bcf88495 of type TaskType.ZH2EN
2025-10-10 17:42:58 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=5828f1cb-1054-4a63-b752-e653bcf88495
2025-10-10 17:42:58 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 5828f1cb-1054-4a63-b752-e653bcf88495
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:42:58 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 4 characters
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:42:58 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 5828f1cb-1054-4a63-b752-e653bcf88495 completed successfully
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:42:58 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/async/zh2en "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:42:58 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'invalid-id' not found
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/invalid-id "HTTP/1.1 404 Not Found"
2025-10-10 17:42:58 - app.utils.error_handlers - ERROR - error_handlers.py:17 - translate_api_exception_handler() - API Exception: Task 'test-task-123' not found
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/async/status/test-task-123 "HTTP/1.1 404 Not Found"
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:42:58 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:42:58 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:42:58 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:42:58 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:42:58 - app.api.translate.routes - ERROR - routes.py:289 - inspect_chain() - Chain inspection error: Chain 'non-existent-chain' not found
2025-10-10 17:42:58 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Chain 'non-existent-chain' not found or inspection failed
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/chains/inspect/non-existent-chain "HTTP/1.1 404 Not Found"
2025-10-10 17:42:58 - app.utils.error_handlers - ERROR - error_handlers.py:71 - http_exception_handler() - HTTP Exception: Invalid prompt configuration
2025-10-10 17:42:58 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/validate-prompt "HTTP/1.1 400 Bad Request"
2025-10-10 17:43:37 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:43:37 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:43:37 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:43:37 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:43:37 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:43:37 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:43:37 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:43:37 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:43:37 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:43:37 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:43:37 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:43:37 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:43:37 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:43:37 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:43:37 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:43:37 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:43:41 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task test-task-123 (zh2en) failed: This is a test failure (Retry 1/3)
2025-10-10 17:43:43 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=3, model=openaixx
2025-10-10 17:43:43 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task d75ba008-36b6-42b5-9980-67b518c8605d of type TaskType.ZH2EN
2025-10-10 17:43:43 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=d75ba008-36b6-42b5-9980-67b518c8605d
2025-10-10 17:43:43 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task d75ba008-36b6-42b5-9980-67b518c8605d
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:43:43 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:43:43 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:43:43 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:43:43 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: openaixx, use_chains: True
2025-10-10 17:43:43 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: openaixx
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: False
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: openaixx
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: False
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: openaixx
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: False
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: openaixx
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: False
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: openaixx
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: False
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: openaixx
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: False
2025-10-10 17:43:43 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:43:43 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 3 characters
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: openaixx
2025-10-10 17:43:43 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: False
2025-10-10 17:43:43 - app.services.langchain_translate - ERROR - langchain_translate.py:177 - zh2en() - zh2en translation failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 17:43:43 - app.services.async_task_manager - ERROR - async_task_manager.py:333 - _execute_task() - Task d75ba008-36b6-42b5-9980-67b518c8605d failed (attempt 1): Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 17:43:43 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task d75ba008-36b6-42b5-9980-67b518c8605d (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 17:43:43 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_d75ba008-36b6-42b5-9980-67b518c8605d_20251010_174343.json
2025-10-10 17:43:43 - app.services.failure_callbacks - INFO - failure_callbacks.py:75 - send_notification_callback() - Sent failure notification for task d75ba008-36b6-42b5-9980-67b518c8605d
2025-10-10 17:43:43 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task d75ba008-36b6-42b5-9980-67b518c8605d (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 17:43:43 - app.services.callback_registry - INFO - callback_registry.py:105 - email_notification_callback() - Would send email notification to test@example.com: 
            异步任务失败通知
            
            任务ID: d75ba008-36b6-42b5-9980-67b518c8605d
          ...
2025-10-10 17:43:43 - app.services.async_task_manager - INFO - async_task_manager.py:238 - _execute_failure_callbacks() - Executed task-specific failure callback for task d75ba008-36b6-42b5-9980-67b518c8605d
2025-10-10 17:43:43 - app.services.failure_callbacks - ERROR - failure_callbacks.py:19 - log_failure_callback() - Task d75ba008-36b6-42b5-9980-67b518c8605d (TaskType.ZH2EN) failed: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured (Retry 0/2)
2025-10-10 17:43:43 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: log_failure_callback
2025-10-10 17:43:43 - app.services.failure_callbacks - INFO - failure_callbacks.py:49 - save_failure_to_file_callback() - Saved failure details to logs\failures\task_failure_d75ba008-36b6-42b5-9980-67b518c8605d_20251010_174343.json
2025-10-10 17:43:43 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: save_failure_to_file_callback
2025-10-10 17:43:43 - app.services.async_task_manager - INFO - async_task_manager.py:249 - _execute_failure_callbacks() - Executed global failure callback: cleanup_failed_task_data_callback
2025-10-10 17:43:43 - app.services.async_task_manager - ERROR - async_task_manager.py:357 - _execute_task() - Task d75ba008-36b6-42b5-9980-67b518c8605d failed permanently after 0 retries: Model 'No service available for text generation. Requested service: openaixx' is not available or not configured
2025-10-10 17:43:49 - app.api.async_tasks.routes - INFO - routes.py:39 - submit_async_zh2en_task() - 提交异步中译英任务: text_length=6, model=dashscope
2025-10-10 17:43:49 - app.services.async_task_manager - INFO - async_task_manager.py:116 - create_task() - Created task 5b8184bc-3205-4e27-b2d7-f185b521cdf3 of type TaskType.ZH2EN
2025-10-10 17:43:49 - app.api.async_tasks.routes - INFO - routes.py:70 - submit_async_zh2en_task() - 异步中译英任务已提交: task_id=5b8184bc-3205-4e27-b2d7-f185b521cdf3
2025-10-10 17:43:49 - app.services.async_task_manager - INFO - async_task_manager.py:290 - _execute_task() - Starting execution of task 5b8184bc-3205-4e27-b2d7-f185b521cdf3
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:43:49 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:43:49 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: dashscope, use_chains: True
2025-10-10 17:43:49 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:43:49 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:43:49 - app.services.langchain_translate - INFO - langchain_translate.py:146 - zh2en() - Starting zh2en translation: 6 characters
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:43:49 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:43:49 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:43:49 - app.services.langchain_translate - INFO - langchain_translate.py:173 - zh2en() - zh2en translation completed successfully
2025-10-10 17:43:49 - app.services.async_task_manager - INFO - async_task_manager.py:325 - _execute_task() - Task 5b8184bc-3205-4e27-b2d7-f185b521cdf3 completed successfully
2025-10-10 17:44:13 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:44:13 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:44:13 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:44:13 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:44:13 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:44:13 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:44:13 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:44:13 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:44:13 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:44:13 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:44:13 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:44:13 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:44:13 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:44:13 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:44:13 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:44:13 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/langchain/chains/list "HTTP/1.1 200 OK"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: DELETE http://testserver/api/translate/langchain/chains/clear "HTTP/1.1 200 OK"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 200 OK"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:13 - app.utils.error_handlers - WARNING - error_handlers.py:49 - validation_exception_handler() - Validation error: 1 errors
2025-10-10 17:44:13 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/summarize "HTTP/1.1 422 Unprocessable Entity"
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:13 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:13 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:13 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:13 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: 英文
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:44:14 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate "HTTP/1.1 200 OK"
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:14 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:44:14 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?model=dashscope "HTTP/1.1 200 OK"
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:14 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:123 - translate() - Starting translation: 12 chars, target: 中文, source: None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:182 - en2zh() - Starting en2zh translation: 12 characters
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:165 - generate_text() - self.llm is None, attempting to reinitialize...
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:169 - generate_text() - Reinitialization failed, self.llm is still None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:207 - en2zh() - en2zh translation completed successfully
2025-10-10 17:44:14 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/langchain/translate?use_chains=false "HTTP/1.1 200 OK"
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:14 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:14 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:14 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:14 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:14 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/models "HTTP/1.1 200 OK"
2025-10-10 17:44:14 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: GET http://testserver/api/translate/prompt-types "HTTP/1.1 200 OK"
2025-10-10 17:44:22 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:44:22 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:44:22 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:44:22 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:44:22 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:44:22 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:44:22 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:44:22 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:44:22 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:44:22 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:44:22 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:44:22 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:44:22 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:44:22 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:44:22 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:44:22 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:44:22 - app.core.config - INFO - __init__.py:60 - validate_ai_models() - AI model configuration validation passed
2025-10-10 17:44:40 - app.main - INFO - main.py:25 - <module>() - 正在初始化FastAPI应用...
2025-10-10 17:44:40 - app.main - INFO - main.py:26 - <module>() - 应用名称: Translate API
2025-10-10 17:44:40 - app.main - INFO - main.py:27 - <module>() - 调试模式: True
2025-10-10 17:44:40 - app.main - INFO - main.py:28 - <module>() - 主机: 127.0.0.1:8000
2025-10-10 17:44:40 - app.utils.error_handlers - INFO - error_handlers.py:125 - register_exception_handlers() - Exception handlers registered successfully
2025-10-10 17:44:40 - app.main - INFO - main.py:34 - <module>() - 全局异常处理器已注册
2025-10-10 17:44:40 - app.main - INFO - main.py:38 - <module>() - V1 API路由已注册
2025-10-10 17:44:40 - app.main - INFO - main.py:41 - <module>() - 翻译API路由已注册
2025-10-10 17:44:40 - app.main - INFO - main.py:44 - <module>() - 异步任务路由已注册
2025-10-10 17:44:40 - app.main - INFO - main.py:47 - <module>() - 流式API路由已注册
2025-10-10 17:44:40 - app.main - INFO - main.py:49 - <module>() - FastAPI应用初始化完成
2025-10-10 17:44:40 - app.services.ai_model - INFO - ai_model.py:395 - _initialize_services() - models 列表未提供，尝试从扁平配置注册模型
2025-10-10 17:44:40 - app.services.ai_model - INFO - ai_model.py:404 - _initialize_services() - 尝试注册模型(扁平): dashscope 类型: dashscope
2025-10-10 17:44:40 - app.services.ai_model - INFO - ai_model.py:413 - _initialize_services() - 模型 dashscope 注册成功
2025-10-10 17:44:40 - app.services.ai_model - INFO - ai_model.py:416 - _initialize_services() - 扁平配置注册完成：['dashscope']
2025-10-10 17:44:40 - app.services.ai_model - INFO - ai_model.py:418 - _initialize_services() - 最终可用模型：['dashscope']
2025-10-10 17:44:40 - app.api.stream.routes - INFO - routes.py:40 - stream_zh2en() - 开始流式中译英: text_length=5, model=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:40 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/zh2en "HTTP/1.1 200 OK"
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:40 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/en2zh "HTTP/1.1 200 OK"
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:291 - _create_service() - Creating service for model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:303 - _create_service() - Creating service with type: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:73 - _initialize_llm() - Initializing LLM for service type: dashscope, model: qwen-plus
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:103 - _initialize_llm() - Setting up DashScope LLM
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:106 - _initialize_llm() - DashScope API key found, creating LLM instance
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:119 - _initialize_llm() - Failed to create DashScope LLM: 2 validation errors for ChatOpenAI
api_key
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_API_KEY': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
base_url
  Input should be a valid string [type=string_type, input_value={'DASHSCOPE_BASE_URL': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:146 - _initialize_llm() - LLM initialization failed: self.llm is None
2025-10-10 17:44:40 - app.services.langchain_service - WARNING - langchain_service.py:310 - _create_service() - ⚠ Service created for dashscope but LLM is None
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:28 - __init__() - Initializing LangChainTranslationService with model: None, use_chains: True
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:37 - _initialize_chains() - Initializing LangChain chains...
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain zh_to_en_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain en_to_zh_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain auto_translate_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain basic_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain keyword_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - app.services.langchain_service - ERROR - langchain_service.py:421 - create_chain() - Failed to create chain structured_summary_chain: 2 validation errors for LLMChain
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
llm.is-instance[Runnable]
  Input should be an instance of Runnable [type=is_instance_of, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/is_instance_of
2025-10-10 17:44:40 - app.services.langchain_translate - INFO - langchain_translate.py:105 - _initialize_chains() - All chains initialized successfully
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:333 - get_service() - Settings object: app_name='Translate API' debug=True host='127.0.0.1' port=8000 reload=True log_level='info' version='0.1.0' ai_model={'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}} database_url=None jwt_secret_key=None jwt_algorithm='HS256' jwt_access_token_expire_minutes=30 redis_url=None
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:334 - get_service() - AI model config: {'default_model': 'dashscope', 'dashscope': {'service_type': 'dashscope', 'api_key': {'DASHSCOPE_API_KEY': None}, 'base_url': {'DASHSCOPE_BASE_URL': None}, 'model': 'qwen-plus', 'temperature': 0.3, 'max_tokens': 2000, 'timeout': 60}}
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:335 - get_service() - Default model: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:348 - get_service() - Looking for service: dashscope
2025-10-10 17:44:40 - app.services.langchain_service - INFO - langchain_service.py:350 - get_service() - Found service: True
2025-10-10 17:44:40 - httpx - INFO - _client.py:1025 - _send_single_request() - HTTP Request: POST http://testserver/api/translate/stream/summarize "HTTP/1.1 200 OK"
